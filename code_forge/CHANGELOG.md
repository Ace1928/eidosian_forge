## Unreleased
- Added integration scope policy controls (`run`, `effective_run`, `global`) for `digest` and `roundtrip`.
- Added roundtrip contract validator (`validate-roundtrip`) with optional hash verification.
- Added apply safety controls:
  - `--require-manifest` guard,
  - `--dry-run` planning mode.
- Added provenance model implementation:
  - `integration/provenance.py`,
  - `provenance_links.json` artifacts for digester and roundtrip runs,
  - MCP query tool `code_forge_provenance`.
- Added GraphRAG export manifest artifact (`graphrag_export_manifest.json`).
- Added knowledge sync node-link capture (`unit_id -> node_id`) for cross-forge traceability.
- Fixed roundtrip apply safety regression:
  - `apply_reconstruction` now scopes prune/removal to reconstruction-managed paths (or explicit scoped filters),
  - prevents unmanaged file deletion during project regeneration.
- Added regression test coverage for managed-scope apply pruning behavior.
- Validated roundtrip/regeneration on `sms_forge` with parity pass and source/reconstructed test parity.
- Updated `sms_forge` test compatibility for Python 3.12 (`AsyncMock` replacement for removed `asyncio.coroutine` usage).
- Added roundtrip reconstruction subsystem (`reconstruct/pipeline.py`) with:
  - deterministic project reconstruction from `file_records` + `code_text`,
  - parity reports with hash-level verification,
  - transactional apply with backup + apply report artifacts.
- Added CLI commands:
  - `reconstruct-project`
  - `parity-report`
  - `apply-reconstruction`
  - `roundtrip`
- Added integration run scoping improvements:
  - Knowledge/GraphRAG exports now accept `run_id`,
  - digest uses active run by default and falls back to latest effective source-root run when no new units were created.
- Added DB helpers for regeneration and scoped exports:
  - `iter_file_records`, `count_file_records`,
  - `iter_units(run_id=...)`,
  - `count_units(run_id=...)`,
  - `latest_effective_run_for_root`.
- Added roundtrip test suite coverage (`test_roundtrip_reconstruct.py`).
- Added drift intelligence module (`digester/drift.py`) with run-over-run metric comparison and warnings.
- Added digester history snapshots (`history/*.json`) and automatic drift generation in `run_archive_digester`.
- Added `code-forge drift-report` CLI command and digest-time drift controls.
- Added optional strict validation for `drift_report.json` when present.
- Added drift-focused tests for end-to-end output quality and schema enforcement.
- Added structural clone hashing and structural duplicate clustering in duplication artifacts.
- Added triage rule IDs, confidence scoring, and `triage_audit.json` decision traces.
- Added strict schema validation (`digester/schema.py`) and CLI command `validate-artifacts`.
- Added relationship-edge extraction (`imports`, `calls`, `uses`) during ingestion and dependency graph export artifacts.
- Added benchmark suite with baseline regression gates and CLI entrypoint (`code-forge benchmark`).
- Added canonical migration planner with staged compatibility shims (`code-forge canonical-plan`).
- Added Archive Digester pipeline (`catalog`, `triage-report`, `digest`) with deterministic intake artifacts.
- Added multi-language generic analyzer and fingerprint utilities for normalized/near dedup.
- Added semantic search + file-level triage outputs (`triage.json`, `triage.csv`, `triage_report.md`).
- Added Knowledge Forge/GraphRAG integration helpers and CLI wiring.
- Expanded test coverage for similarity, generic analysis, digester pipeline, and DB metrics.
- Require models to load successfully and remove echo fallback.
- Added virtual environment installer script and installation docs.
- Default model updated to Qwen/Qwen3-1.7B-FP8.
