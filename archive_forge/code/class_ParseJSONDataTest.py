from __future__ import division
from unittest import TestCase, TestSuite, TextTestRunner
import datetime
from pyparsing import ParseException, pyparsing_test as ppt
import pyparsing as pp
import sys
class ParseJSONDataTest(ParseTestCase):

    def runTest(self):
        from examples.jsonParser import jsonObject
        from test.jsonParserTests import test1, test2, test3, test4, test5
        expected = [[['glossary', [['title', 'example glossary'], ['GlossDiv', [['title', 'S'], ['GlossList', [[['ID', 'SGML'], ['SortAs', 'SGML'], ['GlossTerm', 'Standard Generalized Markup Language'], ['Acronym', 'SGML'], ['LargestPrimeLessThan100', 97], ['AvogadroNumber', 6.02e+23], ['EvenPrimesGreaterThan2', None], ['PrimesLessThan10', [2, 3, 5, 7]], ['WMDsFound', False], ['IraqAlQaedaConnections', None], ['Abbrev', 'ISO 8879:1986'], ['GlossDef', 'A meta-markup language, used to create markup languages such as DocBook.'], ['GlossSeeAlso', ['GML', 'XML', 'markup']], ['EmptyDict', []], ['EmptyList', [[]]]]]]]]]]], [['menu', [['id', 'file'], ['value', 'File:'], ['popup', [['menuitem', [[['value', 'New'], ['onclick', 'CreateNewDoc()']], [['value', 'Open'], ['onclick', 'OpenDoc()']], [['value', 'Close'], ['onclick', 'CloseDoc()']]]]]]]]], [['widget', [['debug', 'on'], ['window', [['title', 'Sample Konfabulator Widget'], ['name', 'main_window'], ['width', 500], ['height', 500]]], ['image', [['src', 'Images/Sun.png'], ['name', 'sun1'], ['hOffset', 250], ['vOffset', 250], ['alignment', 'center']]], ['text', [['data', 'Click Here'], ['size', 36], ['style', 'bold'], ['name', 'text1'], ['hOffset', 250], ['vOffset', 100], ['alignment', 'center'], ['onMouseUp', 'sun1.opacity = (sun1.opacity / 100) * 90;']]]]]], [['web-app', [['servlet', [[['servlet-name', 'cofaxCDS'], ['servlet-class', 'org.cofax.cds.CDSServlet'], ['init-param', [['configGlossary:installationAt', 'Philadelphia, PA'], ['configGlossary:adminEmail', 'ksm@pobox.com'], ['configGlossary:poweredBy', 'Cofax'], ['configGlossary:poweredByIcon', '/images/cofax.gif'], ['configGlossary:staticPath', '/content/static'], ['templateProcessorClass', 'org.cofax.WysiwygTemplate'], ['templateLoaderClass', 'org.cofax.FilesTemplateLoader'], ['templatePath', 'templates'], ['templateOverridePath', ''], ['defaultListTemplate', 'listTemplate.htm'], ['defaultFileTemplate', 'articleTemplate.htm'], ['useJSP', False], ['jspListTemplate', 'listTemplate.jsp'], ['jspFileTemplate', 'articleTemplate.jsp'], ['cachePackageTagsTrack', 200], ['cachePackageTagsStore', 200], ['cachePackageTagsRefresh', 60], ['cacheTemplatesTrack', 100], ['cacheTemplatesStore', 50], ['cacheTemplatesRefresh', 15], ['cachePagesTrack', 200], ['cachePagesStore', 100], ['cachePagesRefresh', 10], ['cachePagesDirtyRead', 10], ['searchEngineListTemplate', 'forSearchEnginesList.htm'], ['searchEngineFileTemplate', 'forSearchEngines.htm'], ['searchEngineRobotsDb', 'WEB-INF/robots.db'], ['useDataStore', True], ['dataStoreClass', 'org.cofax.SqlDataStore'], ['redirectionClass', 'org.cofax.SqlRedirection'], ['dataStoreName', 'cofax'], ['dataStoreDriver', 'com.microsoft.jdbc.sqlserver.SQLServerDriver'], ['dataStoreUrl', 'jdbc:microsoft:sqlserver://LOCALHOST:1433;DatabaseName=goon'], ['dataStoreUser', 'sa'], ['dataStorePassword', 'dataStoreTestQuery'], ['dataStoreTestQuery', "SET NOCOUNT ON;select test='test';"], ['dataStoreLogFile', '/usr/local/tomcat/logs/datastore.log'], ['dataStoreInitConns', 10], ['dataStoreMaxConns', 100], ['dataStoreConnUsageLimit', 100], ['dataStoreLogLevel', 'debug'], ['maxUrlLength', 500]]]], [['servlet-name', 'cofaxEmail'], ['servlet-class', 'org.cofax.cds.EmailServlet'], ['init-param', [['mailHost', 'mail1'], ['mailHostOverride', 'mail2']]]], [['servlet-name', 'cofaxAdmin'], ['servlet-class', 'org.cofax.cds.AdminServlet']], [['servlet-name', 'fileServlet'], ['servlet-class', 'org.cofax.cds.FileServlet']], [['servlet-name', 'cofaxTools'], ['servlet-class', 'org.cofax.cms.CofaxToolsServlet'], ['init-param', [['templatePath', 'toolstemplates/'], ['log', 1], ['logLocation', '/usr/local/tomcat/logs/CofaxTools.log'], ['logMaxSize', ''], ['dataLog', 1], ['dataLogLocation', '/usr/local/tomcat/logs/dataLog.log'], ['dataLogMaxSize', ''], ['removePageCache', '/content/admin/remove?cache=pages&id='], ['removeTemplateCache', '/content/admin/remove?cache=templates&id='], ['fileTransferFolder', '/usr/local/tomcat/webapps/content/fileTransferFolder'], ['lookInContext', 1], ['adminGroupID', 4], ['betaServer', True]]]]]], ['servlet-mapping', [['cofaxCDS', '/'], ['cofaxEmail', '/cofaxutil/aemail/*'], ['cofaxAdmin', '/admin/*'], ['fileServlet', '/static/*'], ['cofaxTools', '/tools/*']]], ['taglib', [['taglib-uri', 'cofax.tld'], ['taglib-location', '/WEB-INF/tlds/cofax.tld']]]]]], [['menu', [['header', 'SVG Viewer'], ['items', [[['id', 'Open']], [['id', 'OpenNew'], ['label', 'Open New']], None, [['id', 'ZoomIn'], ['label', 'Zoom In']], [['id', 'ZoomOut'], ['label', 'Zoom Out']], [['id', 'OriginalView'], ['label', 'Original View']], None, [['id', 'Quality']], [['id', 'Pause']], [['id', 'Mute']], None, [['id', 'Find'], ['label', 'Find...']], [['id', 'FindAgain'], ['label', 'Find Again']], [['id', 'Copy']], [['id', 'CopyAgain'], ['label', 'Copy Again']], [['id', 'CopySVG'], ['label', 'Copy SVG']], [['id', 'ViewSVG'], ['label', 'View SVG']], [['id', 'ViewSource'], ['label', 'View Source']], [['id', 'SaveAs'], ['label', 'Save As']], None, [['id', 'Help']], [['id', 'About'], ['label', 'About Adobe CVG Viewer...']]]]]]]]
        for t, exp in zip((test1, test2, test3, test4, test5), expected):
            result = jsonObject.parseString(t)
            result.pprint()
            self.assertEqual(result.asList(), exp, 'failed test {0}'.format(t))