from __future__ import absolute_import
import cython
import os
import sys
import re
import io
import codecs
import glob
import shutil
import tempfile
from functools import wraps
from . import __version__ as cython_version
def is_cython_generated_file(path, allow_failed=False, if_not_found=True):
    failure_marker = b'#error Do not use this file, it is the result of a failed Cython compilation.'
    file_content = None
    if os.path.exists(path):
        try:
            with open(path, 'rb') as f:
                file_content = f.read(len(failure_marker))
        except (OSError, IOError):
            pass
    if file_content is None:
        return if_not_found
    return file_content.startswith(b'/* Generated by Cython ') or (allow_failed and file_content == failure_marker) or (not file_content)