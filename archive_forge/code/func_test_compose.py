import typing as T
import pytest
from docstring_parser.numpydoc import compose, parse
@pytest.mark.parametrize('source, expected', [('', ''), ('\n', ''), ('Short description', 'Short description'), ('\nShort description\n', 'Short description'), ('\n   Short description\n', 'Short description'), ('Short description\n\nLong description', 'Short description\n\nLong description'), ('\n            Short description\n\n            Long description\n            ', 'Short description\n\nLong description'), ('\n            Short description\n\n            Long description\n            Second line\n            ', 'Short description\n\nLong description\nSecond line'), ('Short description\nLong description', 'Short description\nLong description'), ('\n            Short description\n            Long description\n            ', 'Short description\nLong description'), ('\nShort description\nLong description\n', 'Short description\nLong description'), ('\n            Short description\n            Long description\n            Second line\n            ', 'Short description\nLong description\nSecond line'), ('\n            Short description\n            Meta:\n            -----\n                asd\n            ', 'Short description\nMeta:\n-----\n    asd'), ('\n            Short description\n            Long description\n            Meta:\n            -----\n                asd\n            ', 'Short description\nLong description\nMeta:\n-----\n    asd'), ('\n            Short description\n            First line\n                Second line\n            Meta:\n            -----\n                asd\n            ', 'Short description\nFirst line\n    Second line\nMeta:\n-----\n    asd'), ('\n            Short description\n\n            First line\n                Second line\n            Meta:\n            -----\n                asd\n            ', 'Short description\n\nFirst line\n    Second line\nMeta:\n-----\n    asd'), ('\n            Short description\n\n            First line\n                Second line\n\n            Meta:\n            -----\n                asd\n            ', 'Short description\n\nFirst line\n    Second line\n\nMeta:\n-----\n    asd'), ('\n            Short description\n\n            Meta:\n            -----\n                asd\n                    1\n                        2\n                    3\n            ', 'Short description\n\nMeta:\n-----\n    asd\n        1\n            2\n        3'), ('\n            Short description\n\n            Meta1:\n            ------\n                asd\n                1\n                    2\n                3\n            Meta2:\n            ------\n                herp\n            Meta3:\n            ------\n                derp\n            ', 'Short description\n\nMeta1:\n------\n    asd\n    1\n        2\n    3\nMeta2:\n------\n    herp\nMeta3:\n------\n    derp'), ("\n            Short description\n\n            Parameters:\n            -----------\n                name\n                    description 1\n                priority: int\n                    description 2\n                sender: str, optional\n                    description 3\n                message: str, optional\n                    description 4, defaults to 'hello'\n                multiline: str, optional\n                    long description 5,\n                        defaults to 'bye'\n            ", "Short description\n\nParameters:\n-----------\n    name\n        description 1\n    priority: int\n        description 2\n    sender: str, optional\n        description 3\n    message: str, optional\n        description 4, defaults to 'hello'\n    multiline: str, optional\n        long description 5,\n            defaults to 'bye'"), ('\n            Short description\n            Raises:\n            -------\n                ValueError\n                    description\n            ', 'Short description\nRaises:\n-------\n    ValueError\n        description'), ('\n            Description\n            Examples:\n            --------\n            >>> test1a\n            >>> test1b\n            desc1a\n            desc1b\n            >>> test2a\n            >>> test2b\n            desc2a\n            desc2b\n            ', 'Description\nExamples:\n--------\n>>> test1a\n>>> test1b\ndesc1a\ndesc1b\n>>> test2a\n>>> test2b\ndesc2a\ndesc2b')])
def test_compose(source: str, expected: str) -> None:
    """Test compose in default mode."""
    assert compose(parse(source)) == expected