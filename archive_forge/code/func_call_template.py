from __future__ import (absolute_import, division, print_function)
from copy import deepcopy
import json
import re
import base64
import time
@staticmethod
def call_template():
    return '\n        {\n        "$schema": "http://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",\n        "contentVersion": "1.0.0.0",\n        "parameters": {\n            "location": {\n                "type": "string",\n                "defaultValue": "eastus"\n            },\n            "virtualMachineName": {\n                "type": "string"\n            },\n            "virtualMachineSize":{\n                "type": "string"\n            },\n            "adminUsername": {\n                "type": "string"\n            },\n            "virtualNetworkId": {\n                "type": "string"\n            },\n            "networkSecurityGroupName": {\n                "type": "string"\n            },\n            "adminPassword": {\n                "type": "securestring"\n            },\n            "subnetId": {\n                "type": "string"\n            },\n            "customData": {\n                "type": "string"\n            },\n            "environment": {\n                "type": "string",\n                "defaultValue": "prod"\n            },\n            "storageAccount": {\n                "type": "string"\n            }\n        },\n        "variables": {\n            "vnetId": "[parameters(\'virtualNetworkId\')]",\n            "subnetRef": "[parameters(\'subnetId\')]",\n            "networkInterfaceName": "[concat(parameters(\'virtualMachineName\'),\'-nic\')]",\n            "diagnosticsStorageAccountName": "[parameters(\'storageAccount\')]",\n            "diagnosticsStorageAccountId": "[concat(\'Microsoft.Storage/storageAccounts/\', variables(\'diagnosticsStorageAccountName\'))]",\n            "diagnosticsStorageAccountType": "Standard_LRS",\n            "publicIpAddressName": "[concat(parameters(\'virtualMachineName\'),\'-ip\')]",\n            "publicIpAddressType": "Dynamic",\n            "publicIpAddressSku": "Basic",\n            "msiExtensionName": "ManagedIdentityExtensionForLinux",\n            "occmOffer": "[if(equals(parameters(\'environment\'), \'stage\'), \'netapp-oncommand-cloud-manager-staging-preview\', \'netapp-oncommand-cloud-manager\')]"\n        },\n        "resources": [\n            {\n                "name": "[parameters(\'virtualMachineName\')]",\n                "type": "Microsoft.Compute/virtualMachines",\n                "apiVersion": "2018-04-01",\n                "location": "[parameters(\'location\')]",\n                "dependsOn": [\n                    "[concat(\'Microsoft.Network/networkInterfaces/\', variables(\'networkInterfaceName\'))]",\n                    "[concat(\'Microsoft.Storage/storageAccounts/\', variables(\'diagnosticsStorageAccountName\'))]"\n                ],\n                "properties": {\n                    "osProfile": {\n                        "computerName": "[parameters(\'virtualMachineName\')]",\n                        "adminUsername": "[parameters(\'adminUsername\')]",\n                        "adminPassword": "[parameters(\'adminPassword\')]",\n                        "customData": "[base64(parameters(\'customData\'))]"\n                    },\n                    "hardwareProfile": {\n                        "vmSize": "[parameters(\'virtualMachineSize\')]"\n                    },\n                    "storageProfile": {\n                        "imageReference": {\n                            "publisher": "netapp",\n                            "offer": "[variables(\'occmOffer\')]",\n                            "sku": "occm-byol",\n                            "version": "latest"\n                        },\n                        "osDisk": {\n                            "createOption": "fromImage",\n                            "managedDisk": {\n                                "storageAccountType": "Premium_LRS"\n                            }\n                        },\n                        "dataDisks": []\n                    },\n                    "networkProfile": {\n                        "networkInterfaces": [\n                            {\n                                "id": "[resourceId(\'Microsoft.Network/networkInterfaces\', variables(\'networkInterfaceName\'))]"\n                            }\n                        ]\n                    },\n                    "diagnosticsProfile": {\n                      "bootDiagnostics": {\n                        "enabled": true,\n                        "storageUri":\n                          "[concat(\'https://\', variables(\'diagnosticsStorageAccountName\'), \'.blob.core.windows.net/\')]"\n                      }\n                    }\n                },\n                "plan": {\n                    "name": "occm-byol",\n                    "publisher": "netapp",\n                    "product": "[variables(\'occmOffer\')]"\n                },\n                "identity": {\n                    "type": "systemAssigned"\n                }\n            },\n            {\n                "apiVersion": "2017-12-01",\n                "type": "Microsoft.Compute/virtualMachines/extensions",\n                "name": "[concat(parameters(\'virtualMachineName\'),\'/\', variables(\'msiExtensionName\'))]",\n                "location": "[parameters(\'location\')]",\n                "dependsOn": [\n                    "[concat(\'Microsoft.Compute/virtualMachines/\', parameters(\'virtualMachineName\'))]"\n                ],\n                "properties": {\n                    "publisher": "Microsoft.ManagedIdentity",\n                    "type": "[variables(\'msiExtensionName\')]",\n                    "typeHandlerVersion": "1.0",\n                    "autoUpgradeMinorVersion": true,\n                    "settings": {\n                        "port": 50342\n                    }\n                }\n            },\n            {\n                "name": "[variables(\'diagnosticsStorageAccountName\')]",\n                "type": "Microsoft.Storage/storageAccounts",\n                "apiVersion": "2015-06-15",\n                "location": "[parameters(\'location\')]",\n                "properties": {\n                  "accountType": "[variables(\'diagnosticsStorageAccountType\')]"\n                }\n            },\n            {\n                "name": "[variables(\'networkInterfaceName\')]",\n                "type": "Microsoft.Network/networkInterfaces",\n                "apiVersion": "2018-04-01",\n                "location": "[parameters(\'location\')]",\n                "dependsOn": [\n                    "[concat(\'Microsoft.Network/publicIpAddresses/\', variables(\'publicIpAddressName\'))]"\n                ],\n                "properties": {\n                    "ipConfigurations": [\n                        {\n                            "name": "ipconfig1",\n                            "properties": {\n                                "subnet": {\n                                    "id": "[variables(\'subnetRef\')]"\n                                },\n                                "privateIPAllocationMethod": "Dynamic",\n                                "publicIpAddress": {\n                                    "id": "[resourceId(resourceGroup().name,\'Microsoft.Network/publicIpAddresses\', variables(\'publicIpAddressName\'))]"\n                                }\n                            }\n                        }\n                    ],\n                    "networkSecurityGroup": {\n                        "id": "[parameters(\'networkSecurityGroupName\')]"\n                    }\n                }\n            },\n            {\n                "name": "[variables(\'publicIpAddressName\')]",\n                "type": "Microsoft.Network/publicIpAddresses",\n                "apiVersion": "2017-08-01",\n                "location": "[parameters(\'location\')]",\n                "properties": {\n                    "publicIpAllocationMethod": "[variables(\'publicIpAddressType\')]"\n                },\n                "sku": {\n                    "name": "[variables(\'publicIpAddressSku\')]"\n                }\n            }\n        ],\n        "outputs": {\n            "publicIpAddressName": {\n                "type": "string",\n                "value": "[variables(\'publicIpAddressName\')]"\n            }\n        }\n    }\n    '