import re
from pygments.lexer import RegexLexer, bygroups, default, include, using, words
from pygments.token import Comment, Keyword, Name, Number, Operator, Punctuation, \
from pygments.lexers._csound_builtins import OPCODES
from pygments.lexers.html import HtmlLexer
from pygments.lexers.python import PythonLexer
from pygments.lexers.scripting import LuaLexer
class CsoundLexer(RegexLexer):
    tokens = {'whitespace': [('[ \\t]+', Text), ('\\\\\\n', Text), ('/[*](.|\\n)*?[*]/', Comment.Multiline)], 'macro call': [('(\\$\\w+\\.?)(\\()', bygroups(Comment.Preproc, Punctuation), 'function macro call'), ('\\$\\w+(\\.|\\b)', Comment.Preproc)], 'function macro call': [("((?:\\\\['\\)]|[^'\\)])+)(')", bygroups(Comment.Preproc, Punctuation)), ("([^'\\)]+)(\\))", bygroups(Comment.Preproc, Punctuation), '#pop')], 'whitespace or macro call': [include('whitespace'), include('macro call')], 'preprocessor directives': [('#(e(nd(if)?|lse)|ifn?def|undef)\\b|##', Comment.Preproc), ('#include\\b', Comment.Preproc, 'include'), ('#[ \\t]*define\\b', Comment.Preproc, 'macro name'), ('@+[ \\t]*\\d*', Comment.Preproc)], 'include': [include('whitespace'), ('"', String, 'single-line string')], 'macro name': [include('whitespace'), ('(\\w+)(\\()', bygroups(Comment.Preproc, Text), 'function macro argument list'), ('\\w+', Comment.Preproc, 'object macro definition after name')], 'object macro definition after name': [include('whitespace'), ('#', Punctuation, 'object macro replacement text')], 'object macro replacement text': [('(\\\\#|[^#])+', Comment.Preproc), ('#', Punctuation, '#pop:3')], 'function macro argument list': [("(\\w+)(['#])", bygroups(Comment.Preproc, Punctuation)), ('(\\w+)(\\))', bygroups(Comment.Preproc, Punctuation), 'function macro definition after name')], 'function macro definition after name': [('[ \\t]+', Text), ('#', Punctuation, 'function macro replacement text')], 'function macro replacement text': [('(\\\\#|[^#])+', Comment.Preproc), ('#', Punctuation, '#pop:4')]}