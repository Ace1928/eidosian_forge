from pygments.lexer import RegexLexer, default, include, words
from pygments.token import Comment, Keyword, Name, Number, Punctuation, \
class WebIDLLexer(RegexLexer):
    """
    For Web IDL.

    .. versionadded:: 2.6
    """
    name = 'Web IDL'
    url = 'https://www.w3.org/wiki/Web_IDL'
    aliases = ['webidl']
    filenames = ['*.webidl']
    tokens = {'common': [('\\s+', Text), ('(?s)/\\*.*?\\*/', Comment.Multiline), ('//.*', Comment.Single), ('^#.*', Comment.Preproc)], 'root': [include('common'), ('\\[', Punctuation, 'extended_attributes'), ('partial' + _keyword_suffix, Keyword), ('typedef' + _keyword_suffix, Keyword, ('typedef', 'type')), ('interface' + _keyword_suffix, Keyword, 'interface_rest'), ('enum' + _keyword_suffix, Keyword, 'enum_rest'), ('callback' + _keyword_suffix, Keyword, 'callback_rest'), ('dictionary' + _keyword_suffix, Keyword, 'dictionary_rest'), ('namespace' + _keyword_suffix, Keyword, 'namespace_rest'), (_identifier, Name.Class, 'implements_rest')], 'extended_attributes': [include('common'), (',', Punctuation), (_identifier, Name.Decorator), ('=', Punctuation, 'extended_attribute_rest'), ('\\(', Punctuation, 'argument_list'), ('\\]', Punctuation, '#pop')], 'extended_attribute_rest': [include('common'), (_identifier, Name, 'extended_attribute_named_rest'), (_string, String), ('\\(', Punctuation, 'identifier_list'), default('#pop')], 'extended_attribute_named_rest': [include('common'), ('\\(', Punctuation, 'argument_list'), default('#pop')], 'argument_list': [include('common'), ('\\)', Punctuation, '#pop'), default('argument')], 'argument': [include('common'), ('optional' + _keyword_suffix, Keyword), ('\\[', Punctuation, 'extended_attributes'), (',', Punctuation, '#pop'), ('\\)', Punctuation, '#pop:2'), default(('argument_rest', 'type'))], 'argument_rest': [include('common'), (_identifier, Name.Variable), ('\\.\\.\\.', Punctuation), ('=', Punctuation, 'default_value'), default('#pop')], 'identifier_list': [include('common'), (_identifier, Name.Class), (',', Punctuation), ('\\)', Punctuation, '#pop')], 'type': [include('common'), ('(?:' + '|'.join(_builtin_types) + ')' + _keyword_suffix, Keyword.Type, 'type_null'), (words(('sequence', 'Promise', 'FrozenArray'), suffix=_keyword_suffix), Keyword.Type, 'type_identifier'), (_identifier, Name.Class, 'type_identifier'), ('\\(', Punctuation, 'union_type')], 'union_type': [include('common'), ('or' + _keyword_suffix, Keyword), ('\\)', Punctuation, ('#pop', 'type_null')), default('type')], 'type_identifier': [('<', Punctuation, 'type_list'), default(('#pop', 'type_null'))], 'type_null': [('\\?', Punctuation), default('#pop:2')], 'default_value': [include('common'), include('const_value'), (_string, String, '#pop'), ('\\[\\s*\\]', Punctuation, '#pop')], 'const_value': [include('common'), (words(('true', 'false', '-Infinity', 'Infinity', 'NaN', 'null'), suffix=_keyword_suffix), Keyword.Constant, '#pop'), ('-?(?:(?:[0-9]+\\.[0-9]*|[0-9]*\\.[0-9]+)(?:[Ee][+-]?[0-9]+)?' + '|[0-9]+[Ee][+-]?[0-9]+)', Number.Float, '#pop'), ('-?[1-9][0-9]*', Number.Integer, '#pop'), ('-?0[Xx][0-9A-Fa-f]+', Number.Hex, '#pop'), ('-?0[0-7]*', Number.Oct, '#pop')], 'typedef': [include('common'), (_identifier, Name.Class), (';', Punctuation, '#pop')], 'namespace_rest': [include('common'), (_identifier, Name.Namespace), ('\\{', Punctuation, 'namespace_body'), (';', Punctuation, '#pop')], 'namespace_body': [include('common'), ('\\[', Punctuation, 'extended_attributes'), ('readonly' + _keyword_suffix, Keyword), ('attribute' + _keyword_suffix, Keyword, ('attribute_rest', 'type')), ('const' + _keyword_suffix, Keyword, ('const_rest', 'type')), ('\\}', Punctuation, '#pop'), default(('operation_rest', 'type'))], 'interface_rest': [include('common'), (_identifier, Name.Class), (':', Punctuation), ('\\{', Punctuation, 'interface_body'), (';', Punctuation, '#pop')], 'interface_body': [(words(('iterable', 'maplike', 'setlike'), suffix=_keyword_suffix), Keyword, 'iterable_maplike_setlike_rest'), (words(('setter', 'getter', 'creator', 'deleter', 'legacycaller', 'inherit', 'static', 'stringifier', 'jsonifier'), suffix=_keyword_suffix), Keyword), ('serializer' + _keyword_suffix, Keyword, 'serializer_rest'), (';', Punctuation), include('namespace_body')], 'attribute_rest': [include('common'), (_identifier, Name.Variable), (';', Punctuation, '#pop')], 'const_rest': [include('common'), (_identifier, Name.Constant), ('=', Punctuation, 'const_value'), (';', Punctuation, '#pop')], 'operation_rest': [include('common'), (';', Punctuation, '#pop'), default('operation')], 'operation': [include('common'), (_identifier, Name.Function), ('\\(', Punctuation, 'argument_list'), (';', Punctuation, '#pop:2')], 'iterable_maplike_setlike_rest': [include('common'), ('<', Punctuation, 'type_list'), (';', Punctuation, '#pop')], 'type_list': [include('common'), (',', Punctuation), ('>', Punctuation, '#pop'), default('type')], 'serializer_rest': [include('common'), ('=', Punctuation, 'serialization_pattern'), (';', Punctuation, '#pop'), default('operation')], 'serialization_pattern': [include('common'), (_identifier, Name.Variable, '#pop'), ('\\{', Punctuation, 'serialization_pattern_map'), ('\\[', Punctuation, 'serialization_pattern_list')], 'serialization_pattern_map': [include('common'), (words(('getter', 'inherit', 'attribute'), suffix=_keyword_suffix), Keyword), (',', Punctuation), (_identifier, Name.Variable), ('\\}', Punctuation, '#pop:2')], 'serialization_pattern_list': [include('common'), (words(('getter', 'attribute'), suffix=_keyword_suffix), Keyword), (',', Punctuation), (_identifier, Name.Variable), (']', Punctuation, '#pop:2')], 'enum_rest': [include('common'), (_identifier, Name.Class), ('\\{', Punctuation, 'enum_body'), (';', Punctuation, '#pop')], 'enum_body': [include('common'), (_string, String), (',', Punctuation), ('\\}', Punctuation, '#pop')], 'callback_rest': [include('common'), ('interface' + _keyword_suffix, Keyword, ('#pop', 'interface_rest')), (_identifier, Name.Class), ('=', Punctuation, ('operation', 'type')), (';', Punctuation, '#pop')], 'dictionary_rest': [include('common'), (_identifier, Name.Class), (':', Punctuation), ('\\{', Punctuation, 'dictionary_body'), (';', Punctuation, '#pop')], 'dictionary_body': [include('common'), ('\\[', Punctuation, 'extended_attributes'), ('required' + _keyword_suffix, Keyword), ('\\}', Punctuation, '#pop'), default(('dictionary_item', 'type'))], 'dictionary_item': [include('common'), (_identifier, Name.Variable), ('=', Punctuation, 'default_value'), (';', Punctuation, '#pop')], 'implements_rest': [include('common'), ('implements' + _keyword_suffix, Keyword), (_identifier, Name.Class), (';', Punctuation, '#pop')]}