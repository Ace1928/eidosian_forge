import pytest
from spacy.tokens import Doc
@pytest.mark.parametrize('words,heads,deps,pos,chunk_offsets', [(['un', 'nom'], [1, 1], ['det', 'ROOT'], ['DET', 'NOUN'], [(0, 2)]), (["l'", 'heure'], [1, 1], ['det', 'ROOT'], ['DET', 'NOUN'], [(0, 2)]), (['les', 'romans'], [1, 1], ['det', 'ROOT'], ['DET', 'NOUN'], [(0, 2)]), (['Les', 'vieux', 'Londres'], [2, 2, 2], ['det', 'amod', 'ROOT'], ['DET', 'ADJ', 'NOUN'], [(0, 3)]), (['le', 'nom', 'propre'], [1, 1, 1], ['det', 'ROOT', 'amod'], ['DET', 'NOUN', 'ADJ'], [(0, 3)]), (['Les', 'chiens', 'bruns'], [1, 1, 1], ['det', 'ROOT', 'amod'], ['DET', 'NOUN', 'ADJ'], [(0, 3)]), (['un', 'nouveau', 'film', 'intéressant'], [2, 2, 2, 2], ['det', 'amod', 'ROOT', 'amod'], ['DET', 'ADJ', 'NOUN', 'ADJ'], [(0, 4)]), (['une', 'personne', 'intelligente', 'et', 'drôle'], [1, 1, 1, 4, 2], ['det', 'ROOT', 'amod', 'cc', 'conj'], ['DET', 'NOUN', 'ADJ', 'CCONJ', 'ADJ'], [(0, 5)]), (['un', 'bus', 'qui', 'va', 'au', 'ville'], [1, 1, 3, 1, 5, 3], ['det', 'ROOT', 'nsubj', 'acl:relcl', 'case', 'obl:arg'], ['DET', 'NOUN', 'PRON', 'VERB', 'ADP', 'NOUN'], [(0, 2), (2, 3), (5, 6)]), (['Voilà', 'la', 'maison', 'que', 'nous', 'voulons', 'acheter'], [0, 2, 0, 5, 5, 2, 5], ['ROOT', 'det', 'obj', 'mark', 'nsubj', 'acl:relcl', 'xcomp'], ['VERB', 'DET', 'NOUN', 'SCONJ', 'PRON', 'VERB', 'VERB'], [(1, 3), (4, 5)]), (['Louis', 'XIV'], [0, 0], ['ROOT', 'flat:name'], ['PROPN', 'PROPN'], [(0, 2)]), (['Nations', 'Unies'], [0, 0], ['ROOT', 'flat:name'], ['PROPN', 'PROPN'], [(0, 2)]), (['Louise', 'de', 'Bratagne'], [0, 0, 0], ['ROOT', 'flat:name', 'flat:name'], ['PROPN', 'PROPN', 'PROPN'], [(0, 3)]), (['Louis', 'François', 'Joseph'], [0, 0, 0], ['ROOT', 'flat:name', 'flat:name'], ['PROPN', 'PROPN', 'PROPN'], [(0, 3)]), (['quelques', 'agriculteurs', 'très', 'riches'], [1, 1, 3, 1], ['det', 'ROOT', 'advmod', 'amod'], ['DET', 'NOUN', 'ADV', 'ADJ'], [(0, 4)]), (['Il', 'a', 'un', 'chien', 'et', 'un', 'chat'], [1, 1, 3, 1, 6, 6, 3], ['nsubj', 'ROOT', 'det', 'obj', 'cc', 'det', 'conj'], ['PRON', 'VERB', 'DET', 'NOUN', 'CCONJ', 'DET', 'NOUN'], [(0, 1), (2, 4), (5, 7)]), (["l'", 'écrivain', 'brésilien', 'Aníbal', 'Machado'], [1, 1, 1, 1, 3], ['det', 'ROOT', 'amod', 'appos', 'flat:name'], ['DET', 'NOUN', 'ADJ', 'PROPN', 'PROPN'], [(0, 3), (3, 5)]), (['la', 'destruction', 'de', 'la', 'ville'], [1, 1, 4, 4, 1], ['det', 'ROOT', 'case', 'det', 'nmod'], ['DET', 'NOUN', 'ADP', 'DET', 'NOUN'], [(0, 2), (3, 5)]), (['Archiduchesse', 'd’', 'Autriche'], [0, 2, 0], ['ROOT', 'case', 'nmod'], ['NOUN', 'ADP', 'PROPN'], [(0, 1), (2, 3)]), (['la', 'première', 'usine', 'de', 'drogue', 'du', 'gouvernement'], [2, 2, 2, 4, 2, 6, 2], ['det', 'amod', 'ROOT', 'case', 'nmod', 'case', 'nmod'], ['DET', 'ADJ', 'NOUN', 'ADP', 'NOUN', 'ADP', 'NOUN'], [(0, 3), (4, 5), (6, 7)]), (['Traduction', 'du', 'raport', 'de', 'Susana'], [0, 2, 0, 4, 2], ['ROOT', 'case', 'nmod', 'case', 'nmod'], ['NOUN', 'ADP', 'NOUN', 'ADP', 'PROPN'], [(0, 1), (2, 3), (4, 5)]), (['Le', 'gros', 'chat', 'de', 'Susana', 'et', 'son', 'amie'], [2, 2, 2, 4, 2, 7, 7, 2], ['det', 'amod', 'ROOT', 'case', 'nmod', 'cc', 'det', 'conj'], ['DET', 'ADJ', 'NOUN', 'ADP', 'PROPN', 'CCONJ', 'DET', 'NOUN'], [(0, 3), (4, 5), (6, 8)]), (['Les', 'nouvelles', 'dépenses', 'sont', 'alimentées', 'par', 'le', 'grand', 'compte', 'bancaire', 'de', 'Clinton'], [2, 2, 4, 4, 4, 8, 8, 8, 4, 8, 11, 8], ['det', 'amod', 'nsubj:pass', 'aux:pass', 'ROOT', 'case', 'det', 'amod', 'obl:agent', 'amod', 'case', 'nmod'], ['DET', 'ADJ', 'NOUN', 'AUX', 'VERB', 'ADP', 'DET', 'ADJ', 'NOUN', 'ADJ', 'ADP', 'PROPN'], [(0, 3), (6, 10), (11, 12)])])
def test_fr_noun_chunks(fr_vocab, words, heads, deps, pos, chunk_offsets):
    doc = Doc(fr_vocab, words=words, heads=heads, deps=deps, pos=pos)
    assert [(c.start, c.end) for c in doc.noun_chunks] == chunk_offsets