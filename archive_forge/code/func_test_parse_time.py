import unittest
import aniso8601
from aniso8601.builders import DatetimeTuple, DateTuple, TimeTuple, TimezoneTuple
from aniso8601.exceptions import ISOFormatError
from aniso8601.resolution import TimeResolution
from aniso8601.tests.compat import mock
from aniso8601.time import (
def test_parse_time(self):
    testtuples = (('01:23:45', {'hh': '01', 'mm': '23', 'ss': '45', 'tz': None}), ('24:00:00', {'hh': '24', 'mm': '00', 'ss': '00', 'tz': None}), ('23:21:28,512400', {'hh': '23', 'mm': '21', 'ss': '28.512400', 'tz': None}), ('23:21:28.512400', {'hh': '23', 'mm': '21', 'ss': '28.512400', 'tz': None}), ('01:03:11.858714', {'hh': '01', 'mm': '03', 'ss': '11.858714', 'tz': None}), ('14:43:59.9999997', {'hh': '14', 'mm': '43', 'ss': '59.9999997', 'tz': None}), ('01:23', {'hh': '01', 'mm': '23', 'ss': None, 'tz': None}), ('24:00', {'hh': '24', 'mm': '00', 'ss': None, 'tz': None}), ('01:23,4567', {'hh': '01', 'mm': '23.4567', 'ss': None, 'tz': None}), ('01:23.4567', {'hh': '01', 'mm': '23.4567', 'ss': None, 'tz': None}), ('012345', {'hh': '01', 'mm': '23', 'ss': '45', 'tz': None}), ('240000', {'hh': '24', 'mm': '00', 'ss': '00', 'tz': None}), ('232128,512400', {'hh': '23', 'mm': '21', 'ss': '28.512400', 'tz': None}), ('232128.512400', {'hh': '23', 'mm': '21', 'ss': '28.512400', 'tz': None}), ('010311.858714', {'hh': '01', 'mm': '03', 'ss': '11.858714', 'tz': None}), ('144359.9999997', {'hh': '14', 'mm': '43', 'ss': '59.9999997', 'tz': None}), ('0123', {'hh': '01', 'mm': '23', 'ss': None, 'tz': None}), ('2400', {'hh': '24', 'mm': '00', 'ss': None, 'tz': None}), ('01', {'hh': '01', 'mm': None, 'ss': None, 'tz': None}), ('24', {'hh': '24', 'mm': None, 'ss': None, 'tz': None}), ('12,5', {'hh': '12.5', 'mm': None, 'ss': None, 'tz': None}), ('12.5', {'hh': '12.5', 'mm': None, 'ss': None, 'tz': None}), ('232128,512400+00:00', {'hh': '23', 'mm': '21', 'ss': '28.512400', 'tz': TimezoneTuple(False, None, '00', '00', '+00:00')}), ('232128.512400+00:00', {'hh': '23', 'mm': '21', 'ss': '28.512400', 'tz': TimezoneTuple(False, None, '00', '00', '+00:00')}), ('0123,4567+00:00', {'hh': '01', 'mm': '23.4567', 'ss': None, 'tz': TimezoneTuple(False, None, '00', '00', '+00:00')}), ('0123.4567+00:00', {'hh': '01', 'mm': '23.4567', 'ss': None, 'tz': TimezoneTuple(False, None, '00', '00', '+00:00')}), ('01,4567+00:00', {'hh': '01.4567', 'mm': None, 'ss': None, 'tz': TimezoneTuple(False, None, '00', '00', '+00:00')}), ('01.4567+00:00', {'hh': '01.4567', 'mm': None, 'ss': None, 'tz': TimezoneTuple(False, None, '00', '00', '+00:00')}), ('01:23:45+00:00', {'hh': '01', 'mm': '23', 'ss': '45', 'tz': TimezoneTuple(False, None, '00', '00', '+00:00')}), ('24:00:00+00:00', {'hh': '24', 'mm': '00', 'ss': '00', 'tz': TimezoneTuple(False, None, '00', '00', '+00:00')}), ('23:21:28.512400+00:00', {'hh': '23', 'mm': '21', 'ss': '28.512400', 'tz': TimezoneTuple(False, None, '00', '00', '+00:00')}), ('01:23+00:00', {'hh': '01', 'mm': '23', 'ss': None, 'tz': TimezoneTuple(False, None, '00', '00', '+00:00')}), ('24:00+00:00', {'hh': '24', 'mm': '00', 'ss': None, 'tz': TimezoneTuple(False, None, '00', '00', '+00:00')}), ('01:23.4567+00:00', {'hh': '01', 'mm': '23.4567', 'ss': None, 'tz': TimezoneTuple(False, None, '00', '00', '+00:00')}), ('23:21:28.512400+11:15', {'hh': '23', 'mm': '21', 'ss': '28.512400', 'tz': TimezoneTuple(False, None, '11', '15', '+11:15')}), ('23:21:28.512400-12:34', {'hh': '23', 'mm': '21', 'ss': '28.512400', 'tz': TimezoneTuple(True, None, '12', '34', '-12:34')}), ('23:21:28.512400Z', {'hh': '23', 'mm': '21', 'ss': '28.512400', 'tz': TimezoneTuple(False, True, None, None, 'Z')}), ('06:14:00.000123Z', {'hh': '06', 'mm': '14', 'ss': '00.000123', 'tz': TimezoneTuple(False, True, None, None, 'Z')}))
    for testtuple in testtuples:
        with mock.patch.object(aniso8601.time.PythonTimeBuilder, 'build_time') as mockBuildTime:
            mockBuildTime.return_value = testtuple[1]
            result = parse_time(testtuple[0])
            self.assertEqual(result, testtuple[1])
            mockBuildTime.assert_called_once_with(**testtuple[1])