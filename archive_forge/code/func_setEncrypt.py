import re
import hashlib
from string import digits
from math import sin, cos, tan, pi
from reportlab import rl_config
from reportlab.pdfbase import pdfdoc
from reportlab.pdfbase import pdfmetrics
from reportlab.pdfgen  import pathobject
from reportlab.pdfgen.textobject import PDFTextObject, _PDFColorSetter
from reportlab.lib.colors import black, _chooseEnforceColorSpace, Color, CMYKColor, toColor
from reportlab.lib.utils import ImageReader, isSeq, isStr, isUnicode, _digester, asUnicode
from reportlab.lib.rl_accel import fp_str, escapePDF
from reportlab.lib.boxstuff import aspectRatioFix
def setEncrypt(self, encrypt):
    """
        Set the encryption used for the pdf generated by this canvas.
        If encrypt is a string object, it is used as the user password for the pdf.
        If encrypt is an instance of reportlab.lib.pdfencrypt.StandardEncryption, this object is
        used to encrypt the pdf. This allows more finegrained control over the encryption settings.
        """
    if encrypt:
        from reportlab.lib import pdfencrypt
        if isStr(encrypt):
            if isUnicode(encrypt):
                encrypt = encrypt.encode('utf-8')
            encrypt = pdfencrypt.StandardEncryption(encrypt)
            encrypt.setAllPermissions(1)
        elif not isinstance(encrypt, pdfencrypt.StandardEncryption):
            raise TypeError('Expected string or instance of reportlab.lib.pdfencrypt.StandardEncryption as encrypt parameter but got %r' % encrypt)
        self._doc.encrypt = encrypt
    else:
        try:
            del self._doc.encrypt
        except AttributeError:
            pass