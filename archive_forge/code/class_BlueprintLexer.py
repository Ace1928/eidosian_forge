import re
from pygments.lexer import RegexLexer, include, bygroups, words
from pygments.token import (
class BlueprintLexer(RegexLexer):
    """
    For Blueprint UI markup.

    .. versionadded:: 2.16
    """
    name = 'Blueprint'
    aliases = ['blueprint']
    filenames = ['*.blp']
    mimetypes = ['text/x-blueprint']
    url = 'https://gitlab.gnome.org/jwestman/blueprint-compiler'
    flags = re.IGNORECASE
    tokens = {'root': [include('block-content')], 'type': [('\\$\\s*[a-z_][a-z0-9_\\-]*', Name.Class), ('(?:([a-z_][a-z0-9_\\-]*)(\\s*)(\\.)(\\s*))?([a-z_][a-z0-9_\\-]*)', bygroups(Name.Namespace, Whitespace, Punctuation, Whitespace, Name.Class))], 'whitespace': [('\\s+', Whitespace), ('//.*?\\n', Comment.Single), ('/\\*', Comment.Multiline, 'comment-multiline')], 'comment-multiline': [('\\*/', Comment.Multiline, '#pop'), ('[^*]+', Comment.Multiline), ('\\*', Comment.Multiline)], 'value': [('(typeof)(\\s*)(<)', bygroups(Keyword, Whitespace, Punctuation), 'typeof'), (words(('true', 'false', 'null')), Keyword.Constant), ('[a-z_][a-z0-9_\\-]*', Name.Variable), ('\\|', Operator), ('".*?"', String.Double), ("\\'.*?\\'", String.Single), ('0x[\\d_]*', Number.Hex), ('[0-9_]+', Number.Integer), ('\\d[\\d\\.a-z_]*', Number)], 'typeof': [include('whitespace'), include('type'), ('>', Punctuation, '#pop')], 'content': [include('whitespace'), (words(('after', 'bidirectional', 'bind-property', 'bind', 'default', 'destructive', 'disabled', 'inverted', 'no-sync-create', 'suggested', 'swapped', 'sync-create', 'template')), Keyword), ('(C?_)(\\s*)(\\()', bygroups(Name.Function.Builtin, Whitespace, Punctuation), 'paren-content'), ('(as)(\\s*)(<)', bygroups(Keyword, Whitespace, Punctuation), 'typeof'), ('(\\$?[a-z_][a-z0-9_\\-]*)(\\s*)(\\()', bygroups(Name.Function, Whitespace, Punctuation), 'paren-content'), ('(?:(\\$\\s*[a-z_][a-z0-9_\\-]+)|(?:([a-z_][a-z0-9_\\-]*)(\\s*)(\\.)(\\s*))?([a-z_][a-z0-9_\\-]*))(?:(\\s+)([a-z_][a-z0-9_\\-]*))?(\\s*)(\\{)', bygroups(Name.Class, Name.Namespace, Whitespace, Punctuation, Whitespace, Name.Class, Whitespace, Name.Variable, Whitespace, Punctuation), 'brace-block'), include('value'), (',|\\.', Punctuation)], 'block-content': [('(using)(\\s+)([a-z_][a-z0-9_\\-]*)(\\s+)(\\d[\\d\\.]*)(;)', bygroups(Keyword, Whitespace, Name.Namespace, Whitespace, Name.Namespace, Punctuation)), ('(menu|section|submenu)(?:(\\s+)([a-z_][a-z0-9_\\-]*))?(\\s*)(\\{)', bygroups(Keyword, Whitespace, Name.Variable, Whitespace, Punctuation), 'brace-block'), ('(item)(\\s*)(\\{)', bygroups(Keyword, Whitespace, Punctuation), 'brace-block'), ('(item)(\\s*)(\\()', bygroups(Keyword, Whitespace, Punctuation), 'paren-block'), ('template', Keyword.Declaration, 'template'), ('(responses|items|mime-types|patterns|suffixes|marks|widgets|strings|styles)(\\s*)(\\[)', bygroups(Keyword, Whitespace, Punctuation), 'bracket-block'), ('(accessibility|setters|layout|item)(\\s*)(\\{)', bygroups(Keyword, Whitespace, Punctuation), 'brace-block'), ('(condition|mark|item)(\\s*)(\\()', bygroups(Keyword, Whitespace, Punctuation), 'paren-content'), ('\\[', Punctuation, 'child-type'), ('([a-z_][a-z0-9_\\-]*(?:::[a-z0-9_]+)?)(\\s*)(:|=>)', bygroups(Name.Property, Whitespace, Punctuation), 'statement'), include('content')], 'paren-block': [include('block-content'), ('\\)', Punctuation, '#pop')], 'paren-content': [include('content'), ('\\)', Punctuation, '#pop')], 'bracket-block': [include('block-content'), ('\\]', Punctuation, '#pop')], 'brace-block': [include('block-content'), ('\\}', Punctuation, '#pop')], 'statement': [include('content'), (';', Punctuation, '#pop')], 'child-type': [include('whitespace'), ('(action)(\\s+)(response)(\\s*)(=)(\\s*)', bygroups(Keyword, Whitespace, Name.Attribute, Whitespace, Punctuation, Whitespace)), (words(('default', 'internal-child', 'response')), Keyword), ('[a-z_][a-z0-9_\\-]*', Name.Decorator), include('value'), ('=', Punctuation), ('\\]', Punctuation, '#pop')], 'template': [include('whitespace'), include('type'), (':', Punctuation), ('\\{', Punctuation, ('#pop', 'brace-block'))]}