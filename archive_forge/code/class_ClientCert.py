from __future__ import absolute_import
from __future__ import division
from __future__ import unicode_literals
import io
from googlecloudsdk.calliope import base
from googlecloudsdk.generated_clients.apis import apis_map
class ClientCert(base.TopicCommand):
    """Client certificate authorization supplementary help."""
    detailed_help = {'DESCRIPTION': "Client certificate authorization supplementary help.\n\nDevice Certificate Authorization (DCA) enables Context-aware access to\nidentify devices by their X.509 certificates. DCA for Google Cloud\nAPIs is the second in a series of releases that provides\nadministrators the capability to protect access to their Google\nCloud resources with device certificates. This feature builds\non top of the existing Context-aware access suite (Endpoint\nVerification, Access Context Manager, and VPC Service Controls) and\nensures that only users on trusted devices with a Google-generated\ncertificate are able to access Google Cloud APIs. This\nprovides a stronger signal of device identity (device certificate\nverification), and protects users from credential theft to accidental\nloss by only granting access when credentials and the original device\ncertificate are presented.\n\nTo use this feature, organizations can follow the instructions below to\ninstall an endpoint verification agent to devices:\n\n  * Automatically deploy endpoint verification (https://support.google.com/a/answer/9007320#)\n    * Via Chrome Policy for the extension\n    * 3rd party image/software distribution tools for the Native Helper on macOS\n      and Windows\n  * Let users install endpoint verification themselves from the Chrome Webstore\n    (https://support.google.com/a/users/answer/9018161#install)\n    * Users would also be prompted to install the Native Helper as well\n\nFor a greater level of security, operating system key stores can be used to store client\ncertificate objects. This feature is enabled by using [enterprise-certificate-proxy](https://github.com/googleapis/enterprise-certificate-proxy).\n\nenterprise-certificate-proxy can be installed by running `$ gcloud components install enterprise-certificate-proxy`.\n\nIn order to use enterprise-certificate-proxy it must first be configured. By default the configuration should be written to `~/.config/gcloud/certificate_config.json`.\n\nThe enterprise-certificate-proxy schema is documented on the [GitHub project page](https://github.com/googleapis/enterprise-certificate-proxy#certificate-configuration). Each operating system that gcloud supports uses a different key store. The certificate_config may contain multiple OS configurations.\n\nProvisioning the key stores is not in scope for this document.\n\nRun ``$ gcloud config set context_aware/use_client_certificate True''\nso that the gcloud CLI will load the certificate and send it to services.\nSome services do not support client certificate authorization yet.\nWhen the gcloud CLI sends requests to such services, the client certificate will\nbe ignored.\n\nThe following is the list of services which do NOT support client certificate\nauthorization in the installed version of the gcloud CLI.\n\n{disallowlist}\n\nSee https://cloud.google.com/sdk/gcloud/reference/topic/client-certificate\nfor the support list for the latest version of the gcloud CLI. Please upgrade\nthe gcloud command-line tool if necessary.\n\nNote: {iap_tunnel_service} is a special service gcloud CLI uses to create the\nIAP tunnel. For example, ``{start_iap_tunnel_command}'' can start a tunnel to\nCloud Identity-Aware Proxy through which another process can create a connection\n(e.g. SSH, RDP) to a Google Compute Engine instance. Client certificate\nauthorization is supported in tunnel creation.".format(disallowlist=_GenerateMtlsDisallowedServices(), iap_tunnel_service=IAP_TUNNEL_SERVICE, start_iap_tunnel_command=START_IAP_TUNNEL_COMMAND)}