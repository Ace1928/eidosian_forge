import sys
import unittest
import platform
import pygame
@unittest.skipIf(IS_PYPY or not pygame.HAVE_NEWBUF, 'newbuf with ctypes')
def test_PgObject_AsBuffer_PyBUF_flags(self):
    from pygame.bufferproxy import BufferProxy
    import ctypes
    is_lil_endian = pygame.get_sdl_byteorder() == pygame.LIL_ENDIAN
    fsys, frev = ('<', '>') if is_lil_endian else ('>', '<')
    buftools = self.buftools
    Importer = buftools.Importer
    e = arrinter.Exporter((10, 2), typekind='f', itemsize=ctypes.sizeof(ctypes.c_double))
    a = BufferProxy(e)
    b = Importer(a, buftools.PyBUF_SIMPLE)
    self.assertEqual(b.ndim, 0)
    self.assertTrue(b.format is None)
    self.assertEqual(b.len, e.len)
    self.assertEqual(b.itemsize, e.itemsize)
    self.assertTrue(b.shape is None)
    self.assertTrue(b.strides is None)
    self.assertTrue(b.suboffsets is None)
    self.assertFalse(b.readonly)
    self.assertEqual(b.buf, e.data)
    b = Importer(a, buftools.PyBUF_WRITABLE)
    self.assertEqual(b.ndim, 0)
    self.assertTrue(b.format is None)
    self.assertEqual(b.len, e.len)
    self.assertEqual(b.itemsize, e.itemsize)
    self.assertTrue(b.shape is None)
    self.assertTrue(b.strides is None)
    self.assertTrue(b.suboffsets is None)
    self.assertFalse(b.readonly)
    self.assertEqual(b.buf, e.data)
    b = Importer(a, buftools.PyBUF_ND)
    self.assertEqual(b.ndim, e.nd)
    self.assertTrue(b.format is None)
    self.assertEqual(b.len, a.length)
    self.assertEqual(b.itemsize, e.itemsize)
    self.assertEqual(b.shape, e.shape)
    self.assertTrue(b.strides is None)
    self.assertTrue(b.suboffsets is None)
    self.assertFalse(b.readonly)
    self.assertEqual(b.buf, e.data)
    e = arrinter.Exporter((5, 10), typekind='i', itemsize=2, strides=(24, 2))
    a = BufferProxy(e)
    b = Importer(a, buftools.PyBUF_STRIDES)
    self.assertEqual(b.ndim, e.nd)
    self.assertTrue(b.format is None)
    self.assertEqual(b.len, e.len)
    self.assertEqual(b.itemsize, e.itemsize)
    self.assertEqual(b.shape, e.shape)
    self.assertEqual(b.strides, e.strides)
    self.assertTrue(b.suboffsets is None)
    self.assertFalse(b.readonly)
    self.assertEqual(b.buf, e.data)
    b = Importer(a, buftools.PyBUF_FULL_RO)
    self.assertEqual(b.ndim, e.nd)
    self.assertEqual(b.format, '=h')
    self.assertEqual(b.len, e.len)
    self.assertEqual(b.itemsize, e.itemsize)
    self.assertEqual(b.shape, e.shape)
    self.assertEqual(b.strides, e.strides)
    self.assertTrue(b.suboffsets is None)
    self.assertFalse(b.readonly)
    self.assertEqual(b.buf, e.data)
    self.assertRaises(BufferError, Importer, a, buftools.PyBUF_SIMPLE)
    self.assertRaises(BufferError, Importer, a, buftools.PyBUF_WRITABLE)
    self.assertRaises(BufferError, Importer, a, buftools.PyBUF_WRITABLE)
    self.assertRaises(BufferError, Importer, a, buftools.PyBUF_ND)
    self.assertRaises(BufferError, Importer, a, buftools.PyBUF_C_CONTIGUOUS)
    self.assertRaises(BufferError, Importer, a, buftools.PyBUF_F_CONTIGUOUS)
    self.assertRaises(BufferError, Importer, a, buftools.PyBUF_ANY_CONTIGUOUS)
    self.assertRaises(BufferError, Importer, a, buftools.PyBUF_CONTIG)
    self.assertRaises(BufferError, Importer, a, buftools.PyBUF_SIMPLE)
    self.assertRaises(BufferError, Importer, a, buftools.PyBUF_ND)
    self.assertRaises(BufferError, Importer, a, buftools.PyBUF_C_CONTIGUOUS)
    self.assertRaises(BufferError, Importer, a, buftools.PyBUF_F_CONTIGUOUS)
    self.assertRaises(BufferError, Importer, a, buftools.PyBUF_ANY_CONTIGUOUS)
    self.assertRaises(BufferError, Importer, a, buftools.PyBUF_CONTIG)
    e = arrinter.Exporter((3, 5, 10), typekind='i', itemsize=2, strides=(120, 24, 2), flags=arrinter.PAI_ALIGNED)
    a = BufferProxy(e)
    b = Importer(a, buftools.PyBUF_FULL_RO)
    self.assertEqual(b.ndim, e.nd)
    self.assertEqual(b.format, frev + 'h')
    self.assertEqual(b.len, e.len)
    self.assertEqual(b.itemsize, e.itemsize)
    self.assertEqual(b.shape, e.shape)
    self.assertEqual(b.strides, e.strides)
    self.assertTrue(b.suboffsets is None)
    self.assertTrue(b.readonly)
    self.assertEqual(b.buf, e.data)
    self.assertRaises(BufferError, Importer, a, buftools.PyBUF_FULL)