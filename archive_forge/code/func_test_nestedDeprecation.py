import unittest as pyunit
import warnings
from incremental import Version, getVersionString
from twisted.internet.defer import Deferred, fail, succeed
from twisted.python.deprecate import deprecated, deprecatedModuleAttribute
from twisted.python.failure import Failure
from twisted.python.reflect import (
from twisted.python.util import FancyEqMixin
from twisted.trial import unittest
def test_nestedDeprecation(self):
    """
        L{callDeprecated} ignores all deprecations apart from the first.

        Multiple warnings are generated when a deprecated function calls
        another deprecated function. The first warning is the one generated by
        the explicitly called function. That's the warning that we care about.
        """
    differentVersion = Version('Foo', 1, 2, 3)

    def nestedDeprecation(*args):
        return oldMethod(*args)
    nestedDeprecation = deprecated(differentVersion)(nestedDeprecation)
    self.callDeprecated(differentVersion, nestedDeprecation, 24)
    warningsShown = self.flushWarnings()
    self.assertEqual(len(warningsShown), 1, f'Unexpected warnings: {warningsShown}')