import re
import copy
from pygments.lexer import ExtendedRegexLexer, RegexLexer, include, bygroups, \
from pygments.token import Text, Comment, Operator, Keyword, Name, String, \
from pygments.util import iteritems
class CssLexer(RegexLexer):
    """
    For CSS (Cascading Style Sheets).
    """
    name = 'CSS'
    aliases = ['css']
    filenames = ['*.css']
    mimetypes = ['text/css']
    tokens = {'root': [include('basics')], 'basics': [('\\s+', Text), ('/\\*(?:.|\\n)*?\\*/', Comment), ('\\{', Punctuation, 'content'), ('(\\:{1,2})([\\w-]+)', bygroups(Punctuation, Name.Decorator)), ('(\\.)([\\w-]+)', bygroups(Punctuation, Name.Class)), ('(\\#)([\\w-]+)', bygroups(Punctuation, Name.Namespace)), ('(@)([\\w-]+)', bygroups(Punctuation, Keyword), 'atrule'), ('[\\w-]+', Name.Tag), ('[~^*!%&$\\[\\]()<>|+=@:;,./?-]', Operator), ('"(\\\\\\\\|\\\\"|[^"])*"', String.Double), ("'(\\\\\\\\|\\\\'|[^'])*'", String.Single)], 'atrule': [('\\{', Punctuation, 'atcontent'), (';', Punctuation, '#pop'), include('basics')], 'atcontent': [include('basics'), ('\\}', Punctuation, '#pop:2')], 'content': [('\\s+', Text), ('\\}', Punctuation, '#pop'), (';', Punctuation), ('^@.*?$', Comment.Preproc), (words(_vendor_prefixes), Keyword.Pseudo), ('(' + '|'.join(_css_properties) + ')(\\s*)(\\:)', bygroups(Keyword, Text, Punctuation), 'value-start'), ('([a-zA-Z_][\\w-]*)(\\s*)(\\:)', bygroups(Name, Text, Punctuation), 'value-start'), ('/\\*(?:.|\\n)*?\\*/', Comment)], 'value-start': [('\\s+', Text), (words(_vendor_prefixes), Name.Builtin.Pseudo), include('urls'), ('(' + '|'.join(_functional_notation_keyword_values) + ')(\\()', bygroups(Name.Builtin, Punctuation), 'function-start'), ('([a-zA-Z_][\\w-]+)(\\()', bygroups(Name.Function, Punctuation), 'function-start'), (words(_keyword_values, suffix='\\b'), Keyword.Constant), (words(_other_keyword_values, suffix='\\b'), Keyword.Constant), (words(_color_keywords, suffix='\\b'), Keyword.Constant), (words(_css_properties, suffix='\\b'), Keyword), ('\\!important', Comment.Preproc), ('/\\*(?:.|\\n)*?\\*/', Comment), include('numeric-values'), ('[~^*!%&<>|+=@:./?-]+', Operator), ('[\\[\\](),]+', Punctuation), ('"(\\\\\\\\|\\\\"|[^"])*"', String.Double), ("'(\\\\\\\\|\\\\'|[^'])*'", String.Single), ('[a-zA-Z_][\\w-]*', Name), (';', Punctuation, '#pop'), ('\\}', Punctuation, '#pop:2')], 'function-start': [('\\s+', Text), include('urls'), (words(_vendor_prefixes), Keyword.Pseudo), (words(_keyword_values, suffix='\\b'), Keyword.Constant), (words(_other_keyword_values, suffix='\\b'), Keyword.Constant), (words(_color_keywords, suffix='\\b'), Keyword.Constant), ('(' + '|'.join(_functional_notation_keyword_values) + ')(\\()', bygroups(Name.Builtin, Punctuation), 'function-start'), ('([a-zA-Z_][\\w-]+)(\\()', bygroups(Name.Function, Punctuation), 'function-start'), ('/\\*(?:.|\\n)*?\\*/', Comment), include('numeric-values'), ('[*+/-]', Operator), ('[,]', Punctuation), ('"(\\\\\\\\|\\\\"|[^"])*"', String.Double), ("'(\\\\\\\\|\\\\'|[^'])*'", String.Single), ('[a-zA-Z_-]\\w*', Name), ('\\)', Punctuation, '#pop')], 'urls': [('(url)(\\()(".*?")(\\))', bygroups(Name.Builtin, Punctuation, String.Double, Punctuation)), ("(url)(\\()('.*?')(\\))", bygroups(Name.Builtin, Punctuation, String.Single, Punctuation)), ('(url)(\\()(.*?)(\\))', bygroups(Name.Builtin, Punctuation, String.Other, Punctuation))], 'numeric-values': [('\\#[a-zA-Z0-9]{1,6}', Number.Hex), ('[+\\-]?[0-9]*[.][0-9]+', Number.Float, 'numeric-end'), ('[+\\-]?[0-9]+', Number.Integer, 'numeric-end')], 'numeric-end': [(words(_all_units, suffix='\\b'), Keyword.Type), ('%', Keyword.Type), default('#pop')]}