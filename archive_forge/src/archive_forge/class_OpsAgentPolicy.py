from __future__ import absolute_import
from __future__ import division
from __future__ import unicode_literals
import enum
import json
import sys
from googlecloudsdk.core.resource import resource_property
class OpsAgentPolicy(object):
    """An Ops Agent policy encapsulates the underlying OS Config Guest Policy."""

    class AgentRule(object):
        """An Ops agent rule contains agent type, version, enable_autoupgrade."""

        class Type(*_StrEnum):
            LOGGING = 'logging'
            METRICS = 'metrics'
            OPS_AGENT = 'ops-agent'

        class PackageState(*_StrEnum):
            INSTALLED = 'installed'
            REMOVED = 'removed'

        class Version(*_StrEnum):
            LATEST_OF_ALL = 'latest'
            CURRENT_MAJOR = 'current-major'

        def __init__(self, agent_type, enable_autoupgrade, version=Version.CURRENT_MAJOR, package_state=PackageState.INSTALLED):
            """Initialize AgentRule instance.

      Args:
        agent_type: Type, agent type to be installed.
        enable_autoupgrade: bool, enable autoupgrade for the package or
          not.
        version: str, agent version, e.g. 'latest', '5.5.2', '5.*.*'.
        package_state: Optional PackageState, desiredState for the package.
      """
            self.type = agent_type
            self.enable_autoupgrade = enable_autoupgrade
            self.version = version
            self.package_state = package_state

        def __eq__(self, other):
            return self.__dict__ == other.__dict__

        def ToJson(self):
            """Generate JSON with camel-cased key."""
            key_camel_cased_dict = {resource_property.ConvertToCamelCase(key): value for key, value in self.__dict__.items()}
            return json.dumps(key_camel_cased_dict, default=str, sort_keys=True)

    class Assignment(object):
        """The group or groups of VM instances that the policy applies to."""

        class OsType(object):
            """The criteria for selecting VM Instances by OS type."""

            class OsShortName(*_StrEnum):
                CENTOS = 'centos'
                DEBIAN = 'debian'
                WINDOWS = 'windows'
                RHEL = 'rhel'
                ROCKY = 'rocky'
                SLES = 'sles'
                SLES_SAP = 'sles-sap'
                UBUNTU = 'ubuntu'

            def __init__(self, short_name, version):
                """Initialize OsType instance.

        Args:
          short_name: str, OS distro name, e.g. 'centos', 'debian'.
          version: str, OS version, e.g. '19.10', '7', '7.8'.
        """
                self.short_name = short_name
                self.version = version

            def __eq__(self, other):
                return self.__dict__ == other.__dict__

        def __init__(self, group_labels, zones, instances, os_types):
            """Initialize Assignment Instance.

      Args:
        group_labels: list of dict, VM group label matchers, or None.
        zones: list, VM zone matchers, or None.
        instances: list, instance name matchers, or None.
        os_types: OsType, VM OS type matchers, or None.
      """
            self.group_labels = group_labels or []
            self.zones = zones or []
            self.instances = instances or []
            self.os_types = os_types or []

        def __eq__(self, other):
            return self.__dict__ == other.__dict__

    def __init__(self, assignment, agent_rules, description, etag, name, update_time, create_time):
        """Initialize an ops agent policy instance.

    Args:
      assignment: Assignment, selection criteria for applying policy to VMs.
      agent_rules: list of AgentRule, the agent rules to be applied to VMs.
      description: str, user specified description of the policy.
      etag: str, unique tag for policy, generated by the API, or None.
      name: str, user specified name of the policy, or None.
      update_time: str, update time in RFC3339 format, or None.
      create_time: str, create time in RFC3339 format, or None.
    """
        self.assignment = assignment
        self.agent_rules = agent_rules
        self.description = description
        self.etag = etag
        self.id = name
        self.update_time = update_time
        self.create_time = create_time

    def __eq__(self, other):
        return self.__dict__ == other.__dict__

    def __repr__(self):
        """JSON format string representation for testing."""
        return json.dumps(self, default=lambda o: o.__dict__, indent=2, separators=(',', ': '), sort_keys=True)