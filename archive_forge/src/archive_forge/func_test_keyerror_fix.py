import numpy as np
from skimage.measure import find_contours
from skimage._shared.testing import assert_array_equal
import pytest
@pytest.mark.parametrize('image', [[[0.1368, 0.1122, 0.0, 0.0, 0.0, 0.19417, 0.19417, 0.33701], [0.0, 0.1514, 0.10267, 0.0, np.nan, 0.14908, 0.18158, 0.19178], [0.0, 0.06949, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0186], [0.0, 0.06949, 0.0, 0.17852, 0.08469, 0.02135, 0.08198, np.nan], [0.0, 0.08244, np.nan, np.nan, np.nan, np.nan, np.nan, np.nan], [0.12342, 0.2133, 0.0, np.nan, 0.01301, 0.04335, 0.0, 0.0]], [[0.08, -0.03, -0.17, -0.08, 0.24, 0.06, 0.17, -0.02], [0.12, 0.0, np.nan, 0.24, 0.0, -0.53, 0.26, 0.16], [0.39, 0.0, 0.0, 0.0, 0.0, -0.02, -0.3, 0.01], [0.28, -0.04, -0.03, 0.16, 0.12, 0.01, -0.87, 0.16], [0.26, 0.08, 0.08, 0.08, 0.12, 0.13, 0.11, 0.19], [0.27, 0.24, 0.0, 0.25, 0.32, 0.19, 0.26, 0.22]], [[-0.18, np.nan, np.nan, 0.22, -0.14, -0.23, -0.2, -0.17, -0.19, -0.24], [0.0, np.nan, np.nan, np.nan, -0.1, -0.24, -0.15, -0.02, -0.09, -0.21], [0.43, 0.19, np.nan, np.nan, -0.01, -0.2, -0.22, -0.18, -0.16, -0.07], [0.23, 0.0, np.nan, -0.06, -0.07, -0.21, -0.24, -0.25, -0.23, -0.13], [-0.05, -0.11, 0.0, 0.1, -0.19, -0.23, -0.23, -0.18, -0.19, -0.16], [-0.19, -0.05, 0.13, -0.08, -0.22, -0.23, -0.26, -0.15, -0.12, -0.13], [-0.2, -0.11, -0.11, -0.24, -0.29, -0.27, -0.35, -0.36, -0.27, -0.13], [-0.28, -0.33, -0.31, -0.36, -0.39, -0.37, -0.38, -0.32, -0.34, -0.2], [-0.28, -0.33, -0.39, -0.4, -0.42, -0.38, -0.35, -0.39, -0.35, -0.34], [-0.38, -0.35, -0.41, -0.42, -0.39, -0.36, -0.34, -0.36, -0.28, -0.34]]])
def test_keyerror_fix(image):
    """Failing samples from issue #4830"""
    find_contours(np.array(image, np.float32), 0)