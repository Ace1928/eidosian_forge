from __future__ import absolute_import, division, print_function
from ansible_collections.azure.azcollection.plugins.module_utils.azure_rm_common import AzureRMModuleBase, azure_id_to_dict
def nic_to_dict(nic):
    ip_configurations = [dict(name=config.name, private_ip_address=config.private_ip_address, private_ip_allocation_method=config.private_ip_allocation_method, primary=config.primary if config.primary else False, load_balancer_backend_address_pools=[item.id for item in config.load_balancer_backend_address_pools] if config.load_balancer_backend_address_pools else None, application_gateway_backend_address_pools=[item.id for item in config.application_gateway_backend_address_pools] if config.application_gateway_backend_address_pools else None, public_ip_address=config.public_ip_address.id if config.public_ip_address else None, public_ip_allocation_method=config.public_ip_address.public_ip_allocation_method if config.public_ip_address else None, application_security_groups=[asg.id for asg in config.application_security_groups] if config.application_security_groups else None) for config in nic.ip_configurations]
    config = nic.ip_configurations[0] if len(nic.ip_configurations) > 0 else None
    subnet_dict = azure_id_to_dict(config.subnet.id) if config and config.subnet else None
    subnet = subnet_dict.get('subnets') if subnet_dict else None
    virtual_network = dict(resource_group=subnet_dict.get('resourceGroups'), name=subnet_dict.get('virtualNetworks')) if subnet_dict else None
    return dict(id=nic.id, resource_group=azure_id_to_dict(nic.id).get('resourceGroups'), name=nic.name, subnet=subnet, virtual_network=virtual_network, location=nic.location, tags=nic.tags, security_group=nic.network_security_group.id if nic.network_security_group else None, dns_settings=dict(dns_servers=nic.dns_settings.dns_servers, applied_dns_servers=nic.dns_settings.applied_dns_servers, internal_dns_name_label=nic.dns_settings.internal_dns_name_label, internal_fqdn=nic.dns_settings.internal_fqdn), ip_configurations=ip_configurations, mac_address=nic.mac_address, enable_ip_forwarding=nic.enable_ip_forwarding, provisioning_state=nic.provisioning_state, enable_accelerated_networking=nic.enable_accelerated_networking, dns_servers=nic.dns_settings.dns_servers)