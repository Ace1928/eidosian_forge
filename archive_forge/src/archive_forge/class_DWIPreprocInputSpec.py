import os.path as op
from ..base import (
from .base import MRTrix3Base, MRTrix3BaseInputSpec
class DWIPreprocInputSpec(MRTrix3BaseInputSpec):
    in_file = File(exists=True, argstr='%s', position=0, mandatory=True, desc='input DWI image')
    out_file = File('preproc.mif', argstr='%s', mandatory=True, position=1, usedefault=True, desc='output file after preprocessing')
    rpe_options = traits.Enum('none', 'pair', 'all', 'header', argstr='-rpe_%s', position=2, mandatory=True, desc='Specify acquisition phase-encoding design. "none" for no reversed phase-encoding image, "all" for all DWIs have opposing phase-encoding acquisition, "pair" for using a pair of b0 volumes for inhomogeneity field estimation only, and "header" for phase-encoding information can be found in the image header(s)')
    pe_dir = traits.Str(argstr='-pe_dir %s', desc='Specify the phase encoding direction of the input series, can be a signed axis number (e.g. -0, 1, +2), an axis designator (e.g. RL, PA, IS), or NIfTI axis codes (e.g. i-, j, k)')
    ro_time = traits.Float(argstr='-readout_time %f', desc='Total readout time of input series (in seconds)')
    in_epi = File(exists=True, argstr='-se_epi %s', desc='Provide an additional image series consisting of spin-echo EPI images, which is to be used exclusively by topup for estimating the inhomogeneity field (i.e. it will not form part of the output image series)')
    align_seepi = traits.Bool(argstr='-align_seepi', desc='Achieve alignment between the SE-EPI images used for inhomogeneity field estimation, and the DWIs')
    json_import = File(exists=True, argstr='-json_import %s', desc='Import image header information from an associated JSON file (may be necessary to determine phase encoding information)')
    topup_options = traits.Str(argstr='-topup_options "%s"', desc='Manually provide additional command-line options to the topup command')
    eddy_options = traits.Str(argstr='-eddy_options "%s"', desc='Manually provide additional command-line options to the eddy command')
    eddy_mask = File(exists=True, argstr='-eddy_mask %s', desc='Provide a processing mask to use for eddy, instead of having dwifslpreproc generate one internally using dwi2mask')
    eddy_slspec = File(exists=True, argstr='-eddy_slspec %s', desc="Provide a file containing slice groupings for eddy's slice-to-volume registration")
    eddyqc_text = Directory(exists=False, argstr='-eddyqc_text %s', desc='Copy the various text-based statistical outputs generated by eddy, and the output of eddy_qc (if installed), into an output directory')
    eddyqc_all = Directory(exists=False, argstr='-eddyqc_all %s', desc='Copy ALL outputs generated by eddy (including images), and the output of eddy_qc (if installed), into an output directory')
    out_grad_mrtrix = File('grad.b', argstr='-export_grad_mrtrix %s', desc='export new gradient files in mrtrix format')
    out_grad_fsl = traits.Tuple(File('grad.bvecs', desc='bvecs'), File('grad.bvals', desc='bvals'), argstr='-export_grad_fsl %s, %s', desc='export gradient files in FSL format')