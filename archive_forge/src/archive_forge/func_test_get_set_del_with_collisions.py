import sys
from breezy import tests
from breezy.tests import features
def test_get_set_del_with_collisions(self):
    obj = self.module.SimpleSet()
    h1 = 643
    h2 = 643 + 1024
    h3 = 643 + 1024 * 50
    h4 = 643 + 1024 * 25
    h5 = 644
    h6 = 644 + 1024
    k1 = _Hashable(h1)
    k2 = _Hashable(h2)
    k3 = _Hashable(h3)
    k4 = _Hashable(h4)
    k5 = _Hashable(h5)
    k6 = _Hashable(h6)
    self.assertLookup(643, '<null>', obj, k1)
    self.assertLookup(643, '<null>', obj, k2)
    self.assertLookup(643, '<null>', obj, k3)
    self.assertLookup(643, '<null>', obj, k4)
    self.assertLookup(644, '<null>', obj, k5)
    self.assertLookup(644, '<null>', obj, k6)
    obj.add(k1)
    self.assertIn(k1, obj)
    self.assertNotIn(k2, obj)
    self.assertNotIn(k3, obj)
    self.assertNotIn(k4, obj)
    self.assertLookup(643, k1, obj, k1)
    self.assertLookup(644, '<null>', obj, k2)
    self.assertLookup(644, '<null>', obj, k3)
    self.assertLookup(644, '<null>', obj, k4)
    self.assertLookup(644, '<null>', obj, k5)
    self.assertLookup(644, '<null>', obj, k6)
    self.assertIs(k1, obj[k1])
    self.assertIs(k2, obj.add(k2))
    self.assertIs(k2, obj[k2])
    self.assertLookup(643, k1, obj, k1)
    self.assertLookup(644, k2, obj, k2)
    self.assertLookup(646, '<null>', obj, k3)
    self.assertLookup(646, '<null>', obj, k4)
    self.assertLookup(645, '<null>', obj, k5)
    self.assertLookup(645, '<null>', obj, k6)
    self.assertLookup(643, k1, obj, _Hashable(h1))
    self.assertLookup(644, k2, obj, _Hashable(h2))
    self.assertLookup(646, '<null>', obj, _Hashable(h3))
    self.assertLookup(646, '<null>', obj, _Hashable(h4))
    self.assertLookup(645, '<null>', obj, _Hashable(h5))
    self.assertLookup(645, '<null>', obj, _Hashable(h6))
    obj.add(k3)
    self.assertIs(k3, obj[k3])
    self.assertIn(k1, obj)
    self.assertIn(k2, obj)
    self.assertIn(k3, obj)
    self.assertNotIn(k4, obj)
    obj.discard(k1)
    self.assertLookup(643, '<dummy>', obj, k1)
    self.assertLookup(644, k2, obj, k2)
    self.assertLookup(646, k3, obj, k3)
    self.assertLookup(643, '<dummy>', obj, k4)
    self.assertNotIn(k1, obj)
    self.assertIn(k2, obj)
    self.assertIn(k3, obj)
    self.assertNotIn(k4, obj)