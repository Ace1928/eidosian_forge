import re
from pygments.lexer import Lexer, RegexLexer, include, bygroups, using, \
from pygments.token import Text, Comment, Operator, Keyword, Name, String, \
from pygments.util import shebang_matches
from pygments import unistring as uni
class IokeLexer(RegexLexer):
    """
    For `Ioke <http://ioke.org/>`_ (a strongly typed, dynamic,
    prototype based programming language) source.

    .. versionadded:: 1.4
    """
    name = 'Ioke'
    filenames = ['*.ik']
    aliases = ['ioke', 'ik']
    mimetypes = ['text/x-iokesrc']
    tokens = {'interpolatableText': [('(\\\\b|\\\\e|\\\\t|\\\\n|\\\\f|\\\\r|\\\\"|\\\\\\\\|\\\\#|\\\\\\Z|\\\\u[0-9a-fA-F]{1,4}|\\\\[0-3]?[0-7]?[0-7])', String.Escape), ('#\\{', Punctuation, 'textInterpolationRoot')], 'text': [('(?<!\\\\)"', String, '#pop'), include('interpolatableText'), ('[^"]', String)], 'documentation': [('(?<!\\\\)"', String.Doc, '#pop'), include('interpolatableText'), ('[^"]', String.Doc)], 'textInterpolationRoot': [('\\}', Punctuation, '#pop'), include('root')], 'slashRegexp': [('(?<!\\\\)/[im-psux]*', String.Regex, '#pop'), include('interpolatableText'), ('\\\\/', String.Regex), ('[^/]', String.Regex)], 'squareRegexp': [('(?<!\\\\)][im-psux]*', String.Regex, '#pop'), include('interpolatableText'), ('\\\\]', String.Regex), ('[^\\]]', String.Regex)], 'squareText': [('(?<!\\\\)]', String, '#pop'), include('interpolatableText'), ('[^\\]]', String)], 'root': [('\\n', Text), ('\\s+', Text), (';(.*?)\\n', Comment), ('\\A#!(.*?)\\n', Comment), ('#/', String.Regex, 'slashRegexp'), ('#r\\[', String.Regex, 'squareRegexp'), (':[\\w!:?]+', String.Symbol), ('[\\w!:?]+:(?![\\w!?])', String.Other), (':"(\\\\\\\\|\\\\"|[^"])*"', String.Symbol), ('((?<=fn\\()|(?<=fnx\\()|(?<=method\\()|(?<=macro\\()|(?<=lecro\\()|(?<=syntax\\()|(?<=dmacro\\()|(?<=dlecro\\()|(?<=dlecrox\\()|(?<=dsyntax\\())\\s*"', String.Doc, 'documentation'), ('"', String, 'text'), ('#\\[', String, 'squareText'), ('\\w[\\w!:?]+(?=\\s*=.*mimic\\s)', Name.Entity), ('[a-zA-Z_][\\w!:?]*(?=[\\s]*[+*/-]?=[^=].*($|\\.))', Name.Variable), ('(break|cond|continue|do|ensure|for|for:dict|for:set|if|let|loop|p:for|p:for:dict|p:for:set|return|unless|until|while|with)(?![\\w!:?])', Keyword.Reserved), ('(eval|mimic|print|println)(?![\\w!:?])', Keyword), ('(cell\\?|cellNames|cellOwner\\?|cellOwner|cells|cell|documentation|hash|identity|mimic|removeCell\\!|undefineCell\\!)(?![\\w!:?])', Keyword), ('(stackTraceAsText)(?![\\w!:?])', Keyword), ('(dict|list|message|set)(?![\\w!:?])', Keyword.Reserved), ('(case|case:and|case:else|case:nand|case:nor|case:not|case:or|case:otherwise|case:xor)(?![\\w!:?])', Keyword.Reserved), ('(asText|become\\!|derive|freeze\\!|frozen\\?|in\\?|is\\?|kind\\?|mimic\\!|mimics|mimics\\?|prependMimic\\!|removeAllMimics\\!|removeMimic\\!|same\\?|send|thaw\\!|uniqueHexId)(?![\\w!:?])', Keyword), ('(after|around|before)(?![\\w!:?])', Keyword.Reserved), ('(kind|cellDescriptionDict|cellSummary|genSym|inspect|notice)(?![\\w!:?])', Keyword), ('(use|destructuring)', Keyword.Reserved), ('(cell\\?|cellOwner\\?|cellOwner|cellNames|cells|cell|documentation|identity|removeCell!|undefineCell)(?![\\w!:?])', Keyword), ('(internal:compositeRegexp|internal:concatenateText|internal:createDecimal|internal:createNumber|internal:createRegexp|internal:createText)(?![\\w!:?])', Keyword.Reserved), ('(availableRestarts|bind|error\\!|findRestart|handle|invokeRestart|rescue|restart|signal\\!|warn\\!)(?![\\w!:?])', Keyword.Reserved), ('(nil|false|true)(?![\\w!:?])', Name.Constant), ('(Arity|Base|Call|Condition|DateTime|Aspects|Pointcut|Assignment|BaseBehavior|Boolean|Case|AndCombiner|Else|NAndCombiner|NOrCombiner|NotCombiner|OrCombiner|XOrCombiner|Conditions|Definitions|FlowControl|Internal|Literals|Reflection|DefaultMacro|DefaultMethod|DefaultSyntax|Dict|FileSystem|Ground|Handler|Hook|IO|IokeGround|Struct|LexicalBlock|LexicalMacro|List|Message|Method|Mixins|NativeMethod|Number|Origin|Pair|Range|Reflector|Regexp Match|Regexp|Rescue|Restart|Runtime|Sequence|Set|Symbol|System|Text|Tuple)(?![\\w!:?])', Name.Builtin), (u'(generateMatchMethod|aliasMethod|λ|ʎ|fnx|fn|method|dmacro|dlecro|syntax|macro|dlecrox|lecrox|lecro|syntax)(?![\\w!:?])', Name.Function), ('-?0[xX][0-9a-fA-F]+', Number.Hex), ('-?(\\d+\\.?\\d*|\\d*\\.\\d+)([eE][+-]?[0-9]+)?', Number.Float), ('-?\\d+', Number.Integer), ('#\\(', Punctuation), ('(&&>>|\\|\\|>>|\\*\\*>>|:::|::|\\.\\.\\.|===|\\*\\*>|\\*\\*=|&&>|&&=|\\|\\|>|\\|\\|=|\\->>|\\+>>|!>>|<>>>|<>>|&>>|%>>|#>>|@>>|/>>|\\*>>|\\?>>|\\|>>|\\^>>|~>>|\\$>>|=>>|<<=|>>=|<=>|<\\->|=~|!~|=>|\\+\\+|\\-\\-|<=|>=|==|!=|&&|\\.\\.|\\+=|\\-=|\\*=|\\/=|%=|&=|\\^=|\\|=|<\\-|\\+>|!>|<>|&>|%>|#>|\\@>|\\/>|\\*>|\\?>|\\|>|\\^>|~>|\\$>|<\\->|\\->|<<|>>|\\*\\*|\\?\\||\\?&|\\|\\||>|<|\\*|\\/|%|\\+|\\-|&|\\^|\\||=|\\$|!|~|\\?|#|≠|∘|∈|∉)', Operator), ('(and|nand|or|xor|nor|return|import)(?![\\w!?])', Operator), ("(\\`\\`|\\`|\\'\\'|\\'|\\.|\\,|@@|@|\\[|\\]|\\(|\\)|\\{|\\})", Punctuation), ('[A-Z][\\w!:?]*', Name.Class), ('[a-z_][\\w!:?]*', Name)]}