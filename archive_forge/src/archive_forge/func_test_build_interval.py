import datetime
import unittest
from aniso8601 import compat
from aniso8601.builders import (
from aniso8601.builders.python import (
from aniso8601.exceptions import (
from aniso8601.utcoffset import UTCOffset
def test_build_interval(self):
    testtuples = (({'end': DatetimeTuple(DateTuple('1981', '04', '05', None, None, None), TimeTuple('01', '01', '00', None)), 'duration': DurationTuple(None, '1', None, None, None, None, None)}, datetime.datetime(year=1981, month=4, day=5, hour=1, minute=1), datetime.datetime(year=1981, month=3, day=6, hour=1, minute=1)), ({'end': DateTuple('1981', '04', '05', None, None, None), 'duration': DurationTuple(None, '1', None, None, None, None, None)}, datetime.date(year=1981, month=4, day=5), datetime.date(year=1981, month=3, day=6)), ({'end': DateTuple('2018', '03', '06', None, None, None), 'duration': DurationTuple('1.5', None, None, None, None, None, None)}, datetime.date(year=2018, month=3, day=6), datetime.datetime(year=2016, month=9, day=4, hour=12)), ({'end': DateTuple('2014', '11', '12', None, None, None), 'duration': DurationTuple(None, None, None, None, '1', None, None)}, datetime.date(year=2014, month=11, day=12), datetime.datetime(year=2014, month=11, day=11, hour=23)), ({'end': DateTuple('2014', '11', '12', None, None, None), 'duration': DurationTuple(None, None, None, None, '4', '54', '6.5')}, datetime.date(year=2014, month=11, day=12), datetime.datetime(year=2014, month=11, day=11, hour=19, minute=5, second=53, microsecond=500000)), ({'end': DatetimeTuple(DateTuple('2050', '03', '01', None, None, None), TimeTuple('13', '00', '00', TimezoneTuple(False, True, None, None, 'Z'))), 'duration': DurationTuple(None, None, None, None, '10', None, None)}, datetime.datetime(year=2050, month=3, day=1, hour=13, tzinfo=UTCOffset(name='UTC', minutes=0)), datetime.datetime(year=2050, month=3, day=1, hour=3, tzinfo=UTCOffset(name='UTC', minutes=0))), ({'end': DateTuple('2000', '01', '01', None, None, None), 'duration': DurationTuple('1999.9999999999999999', None, None, None, None, None, None)}, datetime.date(year=2000, month=1, day=1), datetime.datetime(year=1, month=4, day=30, hour=0, minute=0, second=0, microsecond=1)), ({'end': DateTuple('1989', '03', '01', None, None, None), 'duration': DurationTuple(None, '1.9999999999999999', None, None, None, None, None)}, datetime.date(year=1989, month=3, day=1), datetime.datetime(year=1988, month=12, day=31, hour=0, minute=0, second=0, microsecond=1)), ({'end': DateTuple('1989', '03', '01', None, None, None), 'duration': DurationTuple(None, None, '1.9999999999999999', None, None, None, None)}, datetime.date(year=1989, month=3, day=1), datetime.datetime(year=1989, month=2, day=15, hour=0, minute=0, second=0, microsecond=1)), ({'end': DateTuple('1989', '03', '01', None, None, None), 'duration': DurationTuple(None, None, None, '1.9999999999999999', None, None, None)}, datetime.date(year=1989, month=3, day=1), datetime.datetime(year=1989, month=2, day=27, hour=0, minute=0, second=0, microsecond=1)), ({'end': DateTuple('2001', '01', '01', None, None, None), 'duration': DurationTuple(None, None, None, None, '14.9999999999999999', None, None)}, datetime.date(year=2001, month=1, day=1), datetime.datetime(year=2000, month=12, day=31, hour=9, minute=0, second=0, microsecond=1)), ({'end': DateTuple('2001', '01', '01', None, None, None), 'duration': DurationTuple(None, None, None, None, None, '0.00000000999', None)}, datetime.date(year=2001, month=1, day=1), datetime.datetime(year=2001, month=1, day=1)), ({'end': DateTuple('2001', '01', '01', None, None, None), 'duration': DurationTuple(None, None, None, None, None, '0.0000000999', None)}, datetime.date(year=2001, month=1, day=1), datetime.datetime(year=2000, month=12, day=31, hour=23, minute=59, second=59, microsecond=999995)), ({'end': DateTuple('2018', '03', '06', None, None, None), 'duration': DurationTuple(None, None, None, None, None, None, '0.0000001')}, datetime.date(year=2018, month=3, day=6), datetime.datetime(year=2018, month=3, day=6)), ({'end': DateTuple('2018', '03', '06', None, None, None), 'duration': DurationTuple(None, None, None, None, None, None, '2.0000048')}, datetime.date(year=2018, month=3, day=6), datetime.datetime(year=2018, month=3, day=5, hour=23, minute=59, second=57, microsecond=999996)), ({'start': DatetimeTuple(DateTuple('1981', '04', '05', None, None, None), TimeTuple('01', '01', '00', None)), 'duration': DurationTuple(None, '1', None, '1', None, '1', None)}, datetime.datetime(year=1981, month=4, day=5, hour=1, minute=1), datetime.datetime(year=1981, month=5, day=6, hour=1, minute=2)), ({'start': DateTuple('1981', '04', '05', None, None, None), 'duration': DurationTuple(None, '1', None, '1', None, None, None)}, datetime.date(year=1981, month=4, day=5), datetime.date(year=1981, month=5, day=6)), ({'start': DateTuple('2018', '03', '06', None, None, None), 'duration': DurationTuple(None, '2.5', None, None, None, None, None)}, datetime.date(year=2018, month=3, day=6), datetime.date(year=2018, month=5, day=20)), ({'start': DateTuple('2014', '11', '12', None, None, None), 'duration': DurationTuple(None, None, None, None, '1', None, None)}, datetime.date(year=2014, month=11, day=12), datetime.datetime(year=2014, month=11, day=12, hour=1, minute=0)), ({'start': DateTuple('2014', '11', '12', None, None, None), 'duration': DurationTuple(None, None, None, None, '4', '54', '6.5')}, datetime.date(year=2014, month=11, day=12), datetime.datetime(year=2014, month=11, day=12, hour=4, minute=54, second=6, microsecond=500000)), ({'start': DatetimeTuple(DateTuple('2050', '03', '01', None, None, None), TimeTuple('13', '00', '00', TimezoneTuple(False, True, None, None, 'Z'))), 'duration': DurationTuple(None, None, None, None, '10', None, None)}, datetime.datetime(year=2050, month=3, day=1, hour=13, tzinfo=UTCOffset(name='UTC', minutes=0)), datetime.datetime(year=2050, month=3, day=1, hour=23, tzinfo=UTCOffset(name='UTC', minutes=0))), ({'start': DateTuple('0001', '01', '01', None, None, None), 'duration': DurationTuple('1999.9999999999999999', None, None, None, None, None, None)}, datetime.date(year=1, month=1, day=1), datetime.datetime(year=1999, month=9, day=3, hour=23, minute=59, second=59, microsecond=999999)), ({'start': DateTuple('1989', '03', '01', None, None, None), 'duration': DurationTuple(None, '1.9999999999999999', None, None, None, None, None)}, datetime.date(year=1989, month=3, day=1), datetime.datetime(year=1989, month=4, day=29, hour=23, minute=59, second=59, microsecond=999999)), ({'start': DateTuple('1989', '03', '01', None, None, None), 'duration': DurationTuple(None, None, '1.9999999999999999', None, None, None, None)}, datetime.date(year=1989, month=3, day=1), datetime.datetime(year=1989, month=3, day=14, hour=23, minute=59, second=59, microsecond=999999)), ({'start': DateTuple('1989', '03', '01', None, None, None), 'duration': DurationTuple(None, None, None, '1.9999999999999999', None, None, None)}, datetime.date(year=1989, month=3, day=1), datetime.datetime(year=1989, month=3, day=2, hour=23, minute=59, second=59, microsecond=999999)), ({'start': DateTuple('2001', '01', '01', None, None, None), 'duration': DurationTuple(None, None, None, None, '14.9999999999999999', None, None)}, datetime.date(year=2001, month=1, day=1), datetime.datetime(year=2001, month=1, day=1, hour=14, minute=59, second=59, microsecond=999999)), ({'start': DateTuple('2001', '01', '01', None, None, None), 'duration': DurationTuple(None, None, None, None, None, '0.00000000999', None)}, datetime.date(year=2001, month=1, day=1), datetime.datetime(year=2001, month=1, day=1)), ({'start': DateTuple('2001', '01', '01', None, None, None), 'duration': DurationTuple(None, None, None, None, None, '0.0000000999', None)}, datetime.date(year=2001, month=1, day=1), datetime.datetime(year=2001, month=1, day=1, hour=0, minute=0, second=0, microsecond=5)), ({'start': DateTuple('2018', '03', '06', None, None, None), 'duration': DurationTuple(None, None, None, None, None, None, '0.0000001')}, datetime.date(year=2018, month=3, day=6), datetime.datetime(year=2018, month=3, day=6)), ({'start': DateTuple('2018', '03', '06', None, None, None), 'duration': DurationTuple(None, None, None, None, None, None, '2.0000048')}, datetime.date(year=2018, month=3, day=6), datetime.datetime(year=2018, month=3, day=6, hour=0, minute=0, second=2, microsecond=4)), ({'start': DatetimeTuple(DateTuple('1980', '03', '05', None, None, None), TimeTuple('01', '01', '00', None)), 'end': DatetimeTuple(DateTuple('1981', '04', '05', None, None, None), TimeTuple('01', '01', '00', None))}, datetime.datetime(year=1980, month=3, day=5, hour=1, minute=1), datetime.datetime(year=1981, month=4, day=5, hour=1, minute=1)), ({'start': DatetimeTuple(DateTuple('1980', '03', '05', None, None, None), TimeTuple('01', '01', '00', None)), 'end': DateTuple('1981', '04', '05', None, None, None)}, datetime.datetime(year=1980, month=3, day=5, hour=1, minute=1), datetime.date(year=1981, month=4, day=5)), ({'start': DateTuple('1980', '03', '05', None, None, None), 'end': DatetimeTuple(DateTuple('1981', '04', '05', None, None, None), TimeTuple('01', '01', '00', None))}, datetime.date(year=1980, month=3, day=5), datetime.datetime(year=1981, month=4, day=5, hour=1, minute=1)), ({'start': DateTuple('1980', '03', '05', None, None, None), 'end': DateTuple('1981', '04', '05', None, None, None)}, datetime.date(year=1980, month=3, day=5), datetime.date(year=1981, month=4, day=5)), ({'start': DateTuple('1981', '04', '05', None, None, None), 'end': DateTuple('1980', '03', '05', None, None, None)}, datetime.date(year=1981, month=4, day=5), datetime.date(year=1980, month=3, day=5)), ({'start': DatetimeTuple(DateTuple('2050', '03', '01', None, None, None), TimeTuple('13', '00', '00', TimezoneTuple(False, True, None, None, 'Z'))), 'end': DatetimeTuple(DateTuple('2050', '05', '11', None, None, None), TimeTuple('15', '30', '00', TimezoneTuple(False, True, None, None, 'Z')))}, datetime.datetime(year=2050, month=3, day=1, hour=13, tzinfo=UTCOffset(name='UTC', minutes=0)), datetime.datetime(year=2050, month=5, day=11, hour=15, minute=30, tzinfo=UTCOffset(name='UTC', minutes=0))), ({'start': DateTuple('2020', '01', '01', None, None, None), 'end': DateTuple(None, None, '02', None, None, None)}, datetime.date(year=2020, month=1, day=1), datetime.date(year=2020, month=1, day=2)), ({'start': DateTuple('2008', '02', '15', None, None, None), 'end': DateTuple(None, '03', '14', None, None, None)}, datetime.date(year=2008, month=2, day=15), datetime.date(year=2008, month=3, day=14)), ({'start': DatetimeTuple(DateTuple('2007', '12', '14', None, None, None), TimeTuple('13', '30', None, None)), 'end': TimeTuple('15', '30', None, None)}, datetime.datetime(year=2007, month=12, day=14, hour=13, minute=30), datetime.datetime(year=2007, month=12, day=14, hour=15, minute=30)), ({'start': DatetimeTuple(DateTuple('2007', '11', '13', None, None, None), TimeTuple('09', '00', None, None)), 'end': DatetimeTuple(DateTuple(None, None, '15', None, None, None), TimeTuple('17', '00', None, None))}, datetime.datetime(year=2007, month=11, day=13, hour=9), datetime.datetime(year=2007, month=11, day=15, hour=17)), ({'start': DatetimeTuple(DateTuple('2007', '11', '13', None, None, None), TimeTuple('00', '00', None, None)), 'end': DatetimeTuple(DateTuple(None, None, '16', None, None, None), TimeTuple('00', '00', None, None))}, datetime.datetime(year=2007, month=11, day=13), datetime.datetime(year=2007, month=11, day=16)), ({'start': DatetimeTuple(DateTuple('2007', '11', '13', None, None, None), TimeTuple('09', '00', None, TimezoneTuple(False, True, None, None, 'Z'))), 'end': DatetimeTuple(DateTuple(None, None, '15', None, None, None), TimeTuple('17', '00', None, None))}, datetime.datetime(year=2007, month=11, day=13, hour=9, tzinfo=UTCOffset(name='UTC', minutes=0)), datetime.datetime(year=2007, month=11, day=15, hour=17, tzinfo=UTCOffset(name='UTC', minutes=0))), ({'start': DatetimeTuple(DateTuple('2007', '11', '13', None, None, None), TimeTuple('09', '00', None, None)), 'end': TimeTuple('12', '34.567', None, None)}, datetime.datetime(year=2007, month=11, day=13, hour=9), datetime.datetime(year=2007, month=11, day=13, hour=12, minute=34, second=34, microsecond=20000)), ({'start': DateTuple('2007', '11', '13', None, None, None), 'end': TimeTuple('12', '34', None, None)}, datetime.date(year=2007, month=11, day=13), datetime.datetime(year=2007, month=11, day=13, hour=12, minute=34)), ({'start': DatetimeTuple(DateTuple('1980', '03', '05', None, None, None), TimeTuple('01', '01', '00.0000001', None)), 'end': DatetimeTuple(DateTuple('1981', '04', '05', None, None, None), TimeTuple('14', '43', '59.9999997', None))}, datetime.datetime(year=1980, month=3, day=5, hour=1, minute=1), datetime.datetime(year=1981, month=4, day=5, hour=14, minute=43, second=59, microsecond=999999)))
    for testtuple in testtuples:
        result = PythonTimeBuilder.build_interval(**testtuple[0])
        self.assertEqual(result[0], testtuple[1])
        self.assertEqual(result[1], testtuple[2])