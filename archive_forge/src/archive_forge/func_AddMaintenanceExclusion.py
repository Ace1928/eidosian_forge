from __future__ import absolute_import
from __future__ import division
from __future__ import unicode_literals
import os
import time
from apitools.base.py import exceptions as apitools_exceptions
from apitools.base.py import http_wrapper
from googlecloudsdk.api_lib.compute import constants
from googlecloudsdk.api_lib.container import constants as gke_constants
from googlecloudsdk.api_lib.container import util
from googlecloudsdk.api_lib.util import apis as core_apis
from googlecloudsdk.calliope import base
from googlecloudsdk.calliope import exceptions
from googlecloudsdk.command_lib.util.apis import arg_utils
from googlecloudsdk.command_lib.util.args import labels_util
from googlecloudsdk.core import log
from googlecloudsdk.core import properties
from googlecloudsdk.core import resources as cloud_resources
from googlecloudsdk.core import yaml
from googlecloudsdk.core.console import console_io
from googlecloudsdk.core.console import progress_tracker
from googlecloudsdk.core.util import times
import six
from six.moves import range  # pylint: disable=redefined-builtin
import six.moves.http_client
from cmd argument to set a surge upgrade strategy.
def AddMaintenanceExclusion(self, cluster_ref, existing_policy, window_name, window_start, window_end, window_scope):
    """Adds a maintenance exclusion to the cluster's maintenance policy.

    Args:
      cluster_ref: The cluster to update.
      existing_policy: The existing maintenance policy, if any.
      window_name: Unique name for the exclusion. Can be None (will be
        autogenerated if so).
      window_start: Start time of the window as a datetime.datetime. Can be
        None.
      window_end: End time of the window as a datetime.datetime.
      window_scope: Scope that the current exclusion will apply to.

    Returns:
      Operation from this cluster update.

    Raises:
      Error if a maintenance exclusion of that name already exists.
    """
    existing_policy = self._NormalizeMaintenanceExclusionsForPolicy(existing_policy)
    if window_start is None:
        window_start = times.Now(times.UTC)
    if window_name is None:
        window_name = 'generated-exclusion-' + times.Now(times.UTC).isoformat()
    if window_name in self._GetMaintenanceExclusionNames(existing_policy):
        raise util.Error('A maintenance exclusion named {0} already exists.'.format(window_name))
    exclusions = existing_policy.window.maintenanceExclusions
    window = self.messages.TimeWindow(startTime=window_start.isoformat(), endTime=window_end.isoformat())
    if window_scope is not None:
        if window_scope == 'no_upgrades':
            window.maintenanceExclusionOptions = self.messages.MaintenanceExclusionOptions(scope=self.messages.MaintenanceExclusionOptions.ScopeValueValuesEnum.NO_UPGRADES)
        if window_scope == 'no_minor_upgrades':
            window.maintenanceExclusionOptions = self.messages.MaintenanceExclusionOptions(scope=self.messages.MaintenanceExclusionOptions.ScopeValueValuesEnum.NO_MINOR_UPGRADES)
        if window_scope == 'no_minor_or_node_upgrades':
            window.maintenanceExclusionOptions = self.messages.MaintenanceExclusionOptions(scope=self.messages.MaintenanceExclusionOptions.ScopeValueValuesEnum.NO_MINOR_OR_NODE_UPGRADES)
    exclusions.additionalProperties.append(exclusions.AdditionalProperty(key=window_name, value=window))
    return self._SendMaintenancePolicyRequest(cluster_ref, existing_policy)