import os
import sys
from io import StringIO
from django.apps import apps
from django.conf import settings
from django.core import serializers
from django.db import router
from django.db.transaction import atomic
from django.utils.module_loading import import_string
def deserialize_db_from_string(self, data):
    """
        Reload the database with data from a string generated by
        the serialize_db_to_string() method.
        """
    data = StringIO(data)
    table_names = set()
    with atomic(using=self.connection.alias):
        with self.connection.constraint_checks_disabled():
            for obj in serializers.deserialize('json', data, using=self.connection.alias):
                obj.save()
                table_names.add(obj.object.__class__._meta.db_table)
        self.connection.check_constraints(table_names=table_names)