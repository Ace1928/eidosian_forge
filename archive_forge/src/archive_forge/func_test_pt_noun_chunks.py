import pytest
from spacy.tokens import Doc
@pytest.mark.parametrize('words,heads,deps,pos,chunk_offsets', [(['um', 'cachorro'], [1, 1], ['det', 'ROOT'], ['DET', 'NOUN'], [(0, 2)]), (['meu', 'o', 'pai'], [2, 2, 2], ['det', 'det', 'ROOT'], ['DET', 'DET', 'NOUN'], [(0, 3)]), (['todos', 'essos', 'caros'], [2, 2, 2], ['det', 'det', 'ROOT'], ['DET', 'DET', 'NOUN'], [(0, 3)]), (['um', 'irmão', 'meu'], [1, 1, 1], ['det', 'ROOT', 'det'], ['DET', 'NOUN', 'DET'], [(0, 3)]), (['o', 'meu', 'pai'], [2, 2, 2], ['det', 'det', 'ROOT'], ['DET', 'DET', 'NOUN'], [(0, 3)]), (['A', 'bicicleta', 'essa', 'está', 'estragada'], [1, 4, 1, 4, 4], ['det', 'nsubj', 'det', 'cop', 'ROOT'], ['DET', 'NOUN', 'PRON', 'AUX', 'ADJ'], [(0, 2)]), (['o', 'computador', 'que', 'comprou'], [1, 1, 3, 1], ['det', 'ROOT', 'nsubj', 'acl:relcl'], ['DET', 'NOUN', 'PRON', 'VERB'], [(0, 2), (2, 3)]), (['O', 'cachorro', 'marrom'], [1, 1, 1], ['det', 'ROOT', 'amod'], ['DET', 'NOUN', 'ADJ'], [(0, 3)]), (['As', 'calças', 'baratas'], [1, 1, 1], ['det', 'ROOT', 'amod'], ['DET', 'NOUN', 'ADJ'], [(0, 3)]), (['uma', 'boa', 'ideia'], [2, 2, 2], ['det', 'amod', 'ROOT'], ['DET', 'ADJ', 'NOUN'], [(0, 3)]), (['Uma', 'garota', 'esperta', 'e', 'inteligente'], [1, 1, 1, 4, 2], ['det', 'ROOT', 'amod', 'cc', 'conj'], ['DET', 'NOUN', 'ADJ', 'CCONJ', 'ADJ'], [(0, 5)]), (['a', 'grande', 'São', 'Paolo'], [2, 2, 2, 2], ['det', 'amod', 'ROOT', 'flat:name'], ['DET', 'ADJ', 'PROPN', 'PROPN'], [(0, 4)]), (['alguns', 'fazendeiros', 'muito', 'ricos'], [1, 1, 3, 1], ['det', 'ROOT', 'advmod', 'amod'], ['DET', 'NOUN', 'ADV', 'ADJ'], [(0, 4)]), (['Eu', 'tenho', 'um', 'cachorro', 'e', 'um', 'gato'], [1, 1, 3, 1, 6, 6, 3], ['nsubj', 'ROOT', 'det', 'obj', 'cc', 'det', 'conj'], ['PRON', 'VERB', 'DET', 'NOUN', 'CCONJ', 'DET', 'NOUN'], [(0, 1), (2, 4), (5, 7)]), (['o', 'escritor', 'brasileiro', 'Aníbal', 'Machado'], [1, 1, 1, 1, 3], ['det', 'ROOT', 'amod', 'appos', 'flat:name'], ['DET', 'NOUN', 'ADJ', 'PROPN', 'PROPN'], [(0, 3), (3, 5)]), (['Dom', 'Pedro', 'II'], [0, 0, 0], ['ROOT', 'flat:name', 'flat:name'], ['PROPN', 'PROPN', 'PROPN'], [(0, 3)]), (['os', 'Estados', 'Unidos'], [1, 1, 1], ['det', 'ROOT', 'flat:name'], ['DET', 'PROPN', 'PROPN'], [(0, 3)]), (['a', 'destruição', 'da', 'cidade'], [1, 1, 3, 1], ['det', 'ROOT', 'case', 'nmod'], ['DET', 'NOUN', 'ADP', 'NOUN'], [(0, 2), (3, 4)]), (['a', 'primeira', 'fábrica', 'de', 'medicamentos', 'do', 'governo'], [2, 2, 2, 4, 2, 6, 2], ['det', 'amod', 'ROOT', 'case', 'nmod', 'case', 'nmod'], ['DET', 'ADJ', 'NOUN', 'ADP', 'NOUN', 'ADP', 'NOUN'], [(0, 3), (4, 5), (6, 7)]), (['Tradução', 'da', 'reportagem', 'de', 'Susana'], [0, 2, 0, 4, 2], ['ROOT', 'case', 'nmod', 'case', 'nmod'], ['NOUN', 'ADP', 'NOUN', 'ADP', 'PROPN'], [(0, 1), (2, 3), (4, 5)]), (['O', 'gato', 'gordo', 'da', 'Susana', 'e', 'seu', 'amigo'], [1, 1, 1, 4, 1, 7, 7, 1], ['det', 'ROOT', 'amod', 'case', 'nmod', 'cc', 'det', 'conj'], ['DET', 'NOUN', 'ADJ', 'ADP', 'PROPN', 'CCONJ', 'DET', 'NOUN'], [(0, 3), (4, 5), (6, 8)]), (['Os', 'novos', 'gastos', 'são', 'alimentados', 'pela', 'grande', 'conta', 'bancária', 'de', 'Clinton'], [2, 2, 4, 4, 4, 7, 7, 4, 7, 10, 7], ['det', 'amod', 'nsubj:pass', 'aux:pass', 'ROOT', 'case', 'amod', 'obl:agent', 'amod', 'case', 'nmod'], ['DET', 'ADJ', 'NOUN', 'AUX', 'VERB', 'ADP', 'ADJ', 'NOUN', 'ADJ', 'ADP', 'PROPN'], [(0, 3), (6, 9), (10, 11)])])
def test_pt_noun_chunks(pt_vocab, words, heads, deps, pos, chunk_offsets):
    doc = Doc(pt_vocab, words=words, heads=heads, deps=deps, pos=pos)
    assert [(c.start, c.end) for c in doc.noun_chunks] == chunk_offsets