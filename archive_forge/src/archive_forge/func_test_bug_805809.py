import os
from typing import Any, Callable, Dict, List, Tuple, Type
from .. import conflicts, errors, option, osutils, tests, transform
from ..bzr import conflicts as bzr_conflicts
from ..workingtree import WorkingTree
from . import scenarios, script
def test_bug_805809(self):
    self.run_script("\n$ brz init trunk\nCreated a standalone tree (format: 2a)\n$ cd trunk\n$ echo trunk >file\n$ brz add\nadding file\n$ brz commit -m 'create file on trunk'\n2>Committing to: .../trunk/\n2>added file\n2>Committed revision 1.\n# Create a debian branch based on trunk\n$ cd ..\n$ brz branch trunk -r 1 debian\n2>Branched 1 revision.\n$ cd debian\n$ mkdir dir\n$ brz add\nadding dir\n$ brz mv file dir\nfile => dir/file\n$ brz commit -m 'rename file to dir/file for debian'\n2>Committing to: .../debian/\n2>added dir\n2>renamed file => dir/file\n2>Committed revision 2.\n# Create an experimental branch with a new root-id\n$ cd ..\n$ brz init experimental\nCreated a standalone tree (format: 2a)\n$ cd experimental\n# Work around merging into empty branch not being supported\n# (http://pad.lv/308562)\n$ echo something >not-empty\n$ brz add\nadding not-empty\n$ brz commit -m 'Add some content in experimental'\n2>Committing to: .../experimental/\n2>added not-empty\n2>Committed revision 1.\n# merge debian even without a common ancestor\n$ brz merge ../debian -r0..2\n2>+N  dir/\n2>+N  dir/file\n2>All changes applied successfully.\n$ brz commit -m 'merging debian into experimental'\n2>Committing to: .../experimental/\n2>added dir\n2>added dir/file\n2>Committed revision 2.\n# Create an ubuntu branch with yet another root-id\n$ cd ..\n$ brz init ubuntu\nCreated a standalone tree (format: 2a)\n$ cd ubuntu\n# Work around merging into empty branch not being supported\n# (http://pad.lv/308562)\n$ echo something >not-empty-ubuntu\n$ brz add\nadding not-empty-ubuntu\n$ brz commit -m 'Add some content in experimental'\n2>Committing to: .../ubuntu/\n2>added not-empty-ubuntu\n2>Committed revision 1.\n# Also merge debian\n$ brz merge ../debian -r0..2\n2>+N  dir/\n2>+N  dir/file\n2>All changes applied successfully.\n$ brz commit -m 'merging debian'\n2>Committing to: .../ubuntu/\n2>added dir\n2>added dir/file\n2>Committed revision 2.\n# Now try to merge experimental\n$ brz merge ../experimental\n2>+N  not-empty\n2>Path conflict: dir / dir\n2>1 conflicts encountered.\n")