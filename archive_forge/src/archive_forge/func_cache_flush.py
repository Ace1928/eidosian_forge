import atexit
import inspect
import os
import pprint
import re
import subprocess
import textwrap
def cache_flush(self):
    """
        Force update the cache.
        """
    if not self._cache_path:
        return
    self.dist_log('write cache to path ->', self._cache_path)
    cdict = self.__dict__.copy()
    for attr in self.__dict__.keys():
        if re.match(self._cache_ignore, attr):
            cdict.pop(attr)
    d = os.path.dirname(self._cache_path)
    if not os.path.exists(d):
        os.makedirs(d)
    repr_dict = pprint.pformat(cdict, compact=True)
    with open(self._cache_path, 'w') as f:
        f.write(textwrap.dedent("            # AUTOGENERATED DON'T EDIT\n            # Please make changes to the code generator             (distutils/ccompiler_opt.py)\n            hash = {}\n            data = \\\n            ").format(self._cache_hash))
        f.write(repr_dict)