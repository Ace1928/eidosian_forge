from ..sage_helper import _within_sage, sage_method, SageNotAvailable
def _solve_two_equations(eqn1, eqn2, x_val, y_val):
    """
    Given two polynomial equations with rational coefficients in 'x' and 'y'
    and real intervals for x and y to isolate a solution to the system of
    equations, return the number field generated by x and the value of y in
    that number field. If y is not contained in the number field generated
    by x, return None.
    """
    Rx = PolynomialRing(RationalField(), 'x')
    R = PolynomialRing(Rx, 'y')
    Reqn1 = R(eqn1)
    resultant = Reqn1.resultant(R(eqn2))

    def eval_factor_res(p):
        """
        Evaluation method for the factors of the resultant. Apply polynomial
        to the given interval for x.
        """
        return p(x_val)
    resultant_factor = _find_unique_good_factor(resultant, eval_factor_res)
    resultant_factor = Rx(resultant_factor)
    result_number_field = NumberField(resultant_factor, 'x', embedding=x_val.center())
    yEqn = Reqn1.change_ring(result_number_field)

    def eval_factor_yEqn(p):
        """
        Evaluation method for the factors of the equation factored over the
        number field. We take the factor and turn it into a polynomial in
        Q[x][y]. We then put in the given intervals for x and y.
        """
        lift = p.map_coefficients(lambda c: c.lift('x'), Rx)
        return lift.substitute(x=x_val, y=y_val)
    yEqn_factor = _find_unique_good_factor(yEqn, eval_factor_yEqn)
    if not yEqn_factor.degree() == 1:
        return None
    constant_term, linear_term = yEqn_factor.coefficients(sparse=False)
    return (result_number_field, -constant_term / linear_term)