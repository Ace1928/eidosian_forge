import pyomo.common.unittest as unittest
from io import StringIO
from pyomo.environ import (
from pyomo.network import Port, Arc
def test_polynomial_degree(self):
    pipe = ConcreteModel()
    pipe.SPECIES = Set(initialize=['a', 'b', 'c'])
    pipe.flow = Var()
    pipe.composition = Var(pipe.SPECIES)
    pipe.pIn = Var(within=NonNegativeReals)
    pipe.OUT = Port()
    self.assertEqual(pipe.OUT.polynomial_degree(), 0)
    pipe.OUT.add(pipe.flow, 'flow')
    self.assertEqual(pipe.OUT.polynomial_degree(), 1)
    pipe.flow.fix(0)
    self.assertEqual(pipe.OUT.polynomial_degree(), 0)
    pipe.OUT.add(-pipe.pIn, 'pressure')
    self.assertEqual(pipe.OUT.polynomial_degree(), 1)
    pipe.pIn.fix(1)
    self.assertEqual(pipe.OUT.polynomial_degree(), 0)
    pipe.OUT.add(pipe.composition, 'composition')
    self.assertEqual(pipe.OUT.polynomial_degree(), 1)
    pipe.composition['a'].fix(1)
    self.assertEqual(pipe.OUT.polynomial_degree(), 1)
    pipe.composition['b'].fix(1)
    pipe.composition['c'].fix(1)
    self.assertEqual(pipe.OUT.polynomial_degree(), 0)
    pipe.OUT.add(pipe.flow * pipe.pIn, 'quadratic')
    self.assertEqual(pipe.OUT.polynomial_degree(), 0)
    pipe.flow.unfix()
    self.assertEqual(pipe.OUT.polynomial_degree(), 1)
    pipe.pIn.unfix()
    self.assertEqual(pipe.OUT.polynomial_degree(), 2)
    pipe.OUT.add(pipe.flow / pipe.pIn, 'nonLin')
    self.assertEqual(pipe.OUT.polynomial_degree(), None)