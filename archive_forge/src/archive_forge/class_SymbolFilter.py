import re
from pygments.token import String, Comment, Keyword, Name, Error, Whitespace, \
from pygments.filter import Filter
from pygments.util import get_list_opt, get_int_opt, get_bool_opt, \
from pygments.plugin import find_plugin_filters
class SymbolFilter(Filter):
    """Convert mathematical symbols such as \\<longrightarrow> in Isabelle
    or \\longrightarrow in LaTeX into Unicode characters.

    This is mostly useful for HTML or console output when you want to
    approximate the source rendering you'd see in an IDE.

    Options accepted:

    `lang` : string
       The symbol language. Must be one of ``'isabelle'`` or
       ``'latex'``.  The default is ``'isabelle'``.
    """
    latex_symbols = {'\\alpha': 'Î±', '\\beta': 'Î²', '\\gamma': 'Î³', '\\delta': 'Î´', '\\varepsilon': 'Îµ', '\\zeta': 'Î¶', '\\eta': 'Î·', '\\vartheta': 'Î¸', '\\iota': 'Î¹', '\\kappa': 'Îº', '\\lambda': 'Î»', '\\mu': 'Î¼', '\\nu': 'Î½', '\\xi': 'Î¾', '\\pi': 'Ï€', '\\varrho': 'Ï', '\\sigma': 'Ïƒ', '\\tau': 'Ï„', '\\upsilon': 'Ï…', '\\varphi': 'Ï†', '\\chi': 'Ï‡', '\\psi': 'Ïˆ', '\\omega': 'Ï‰', '\\Gamma': 'Î“', '\\Delta': 'Î”', '\\Theta': 'Î˜', '\\Lambda': 'Î›', '\\Xi': 'Î', '\\Pi': 'Î ', '\\Sigma': 'Î£', '\\Upsilon': 'Î¥', '\\Phi': 'Î¦', '\\Psi': 'Î¨', '\\Omega': 'Î©', '\\leftarrow': 'â†', '\\longleftarrow': 'âŸµ', '\\rightarrow': 'â†’', '\\longrightarrow': 'âŸ¶', '\\Leftarrow': 'â‡', '\\Longleftarrow': 'âŸ¸', '\\Rightarrow': 'â‡’', '\\Longrightarrow': 'âŸ¹', '\\leftrightarrow': 'â†”', '\\longleftrightarrow': 'âŸ·', '\\Leftrightarrow': 'â‡”', '\\Longleftrightarrow': 'âŸº', '\\mapsto': 'â†¦', '\\longmapsto': 'âŸ¼', '\\relbar': 'â”€', '\\Relbar': 'â•', '\\hookleftarrow': 'â†©', '\\hookrightarrow': 'â†ª', '\\leftharpoondown': 'â†½', '\\rightharpoondown': 'â‡', '\\leftharpoonup': 'â†¼', '\\rightharpoonup': 'â‡€', '\\rightleftharpoons': 'â‡Œ', '\\leadsto': 'â†', '\\downharpoonleft': 'â‡ƒ', '\\downharpoonright': 'â‡‚', '\\upharpoonleft': 'â†¿', '\\upharpoonright': 'â†¾', '\\restriction': 'â†¾', '\\uparrow': 'â†‘', '\\Uparrow': 'â‡‘', '\\downarrow': 'â†“', '\\Downarrow': 'â‡“', '\\updownarrow': 'â†•', '\\Updownarrow': 'â‡•', '\\langle': 'âŸ¨', '\\rangle': 'âŸ©', '\\lceil': 'âŒˆ', '\\rceil': 'âŒ‰', '\\lfloor': 'âŒŠ', '\\rfloor': 'âŒ‹', '\\flqq': 'Â«', '\\frqq': 'Â»', '\\bot': 'âŠ¥', '\\top': 'âŠ¤', '\\wedge': 'âˆ§', '\\bigwedge': 'â‹€', '\\vee': 'âˆ¨', '\\bigvee': 'â‹', '\\forall': 'âˆ€', '\\exists': 'âˆƒ', '\\nexists': 'âˆ„', '\\neg': 'Â¬', '\\Box': 'â–¡', '\\Diamond': 'â—‡', '\\vdash': 'âŠ¢', '\\models': 'âŠ¨', '\\dashv': 'âŠ£', '\\surd': 'âˆš', '\\le': 'â‰¤', '\\ge': 'â‰¥', '\\ll': 'â‰ª', '\\gg': 'â‰«', '\\lesssim': 'â‰²', '\\gtrsim': 'â‰³', '\\lessapprox': 'âª…', '\\gtrapprox': 'âª†', '\\in': 'âˆˆ', '\\notin': 'âˆ‰', '\\subset': 'âŠ‚', '\\supset': 'âŠƒ', '\\subseteq': 'âŠ†', '\\supseteq': 'âŠ‡', '\\sqsubset': 'âŠ', '\\sqsupset': 'âŠ', '\\sqsubseteq': 'âŠ‘', '\\sqsupseteq': 'âŠ’', '\\cap': 'âˆ©', '\\bigcap': 'â‹‚', '\\cup': 'âˆª', '\\bigcup': 'â‹ƒ', '\\sqcup': 'âŠ”', '\\bigsqcup': 'â¨†', '\\sqcap': 'âŠ“', '\\Bigsqcap': 'â¨…', '\\setminus': 'âˆ–', '\\propto': 'âˆ', '\\uplus': 'âŠ', '\\bigplus': 'â¨„', '\\sim': 'âˆ¼', '\\doteq': 'â‰', '\\simeq': 'â‰ƒ', '\\approx': 'â‰ˆ', '\\asymp': 'â‰', '\\cong': 'â‰…', '\\equiv': 'â‰¡', '\\Join': 'â‹ˆ', '\\bowtie': 'â¨', '\\prec': 'â‰º', '\\succ': 'â‰»', '\\preceq': 'â‰¼', '\\succeq': 'â‰½', '\\parallel': 'âˆ¥', '\\mid': 'Â¦', '\\pm': 'Â±', '\\mp': 'âˆ“', '\\times': 'Ã—', '\\div': 'Ã·', '\\cdot': 'â‹…', '\\star': 'â‹†', '\\circ': 'âˆ˜', '\\dagger': 'â€ ', '\\ddagger': 'â€¡', '\\lhd': 'âŠ²', '\\rhd': 'âŠ³', '\\unlhd': 'âŠ´', '\\unrhd': 'âŠµ', '\\triangleleft': 'â—ƒ', '\\triangleright': 'â–¹', '\\triangle': 'â–³', '\\triangleq': 'â‰œ', '\\oplus': 'âŠ•', '\\bigoplus': 'â¨', '\\otimes': 'âŠ—', '\\bigotimes': 'â¨‚', '\\odot': 'âŠ™', '\\bigodot': 'â¨€', '\\ominus': 'âŠ–', '\\oslash': 'âŠ˜', '\\dots': 'â€¦', '\\cdots': 'â‹¯', '\\sum': 'âˆ‘', '\\prod': 'âˆ', '\\coprod': 'âˆ', '\\infty': 'âˆ', '\\int': 'âˆ«', '\\oint': 'âˆ®', '\\clubsuit': 'â™£', '\\diamondsuit': 'â™¢', '\\heartsuit': 'â™¡', '\\spadesuit': 'â™ ', '\\aleph': 'â„µ', '\\emptyset': 'âˆ…', '\\nabla': 'âˆ‡', '\\partial': 'âˆ‚', '\\flat': 'â™­', '\\natural': 'â™®', '\\sharp': 'â™¯', '\\angle': 'âˆ ', '\\copyright': 'Â©', '\\textregistered': 'Â®', '\\textonequarter': 'Â¼', '\\textonehalf': 'Â½', '\\textthreequarters': 'Â¾', '\\textordfeminine': 'Âª', '\\textordmasculine': 'Âº', '\\euro': 'â‚¬', '\\pounds': 'Â£', '\\yen': 'Â¥', '\\textcent': 'Â¢', '\\textcurrency': 'Â¤', '\\textdegree': 'Â°'}
    isabelle_symbols = {'\\<zero>': 'ğŸ¬', '\\<one>': 'ğŸ­', '\\<two>': 'ğŸ®', '\\<three>': 'ğŸ¯', '\\<four>': 'ğŸ°', '\\<five>': 'ğŸ±', '\\<six>': 'ğŸ²', '\\<seven>': 'ğŸ³', '\\<eight>': 'ğŸ´', '\\<nine>': 'ğŸµ', '\\<A>': 'ğ’œ', '\\<B>': 'â„¬', '\\<C>': 'ğ’', '\\<D>': 'ğ’Ÿ', '\\<E>': 'â„°', '\\<F>': 'â„±', '\\<G>': 'ğ’¢', '\\<H>': 'â„‹', '\\<I>': 'â„', '\\<J>': 'ğ’¥', '\\<K>': 'ğ’¦', '\\<L>': 'â„’', '\\<M>': 'â„³', '\\<N>': 'ğ’©', '\\<O>': 'ğ’ª', '\\<P>': 'ğ’«', '\\<Q>': 'ğ’¬', '\\<R>': 'â„›', '\\<S>': 'ğ’®', '\\<T>': 'ğ’¯', '\\<U>': 'ğ’°', '\\<V>': 'ğ’±', '\\<W>': 'ğ’²', '\\<X>': 'ğ’³', '\\<Y>': 'ğ’´', '\\<Z>': 'ğ’µ', '\\<a>': 'ğ–º', '\\<b>': 'ğ–»', '\\<c>': 'ğ–¼', '\\<d>': 'ğ–½', '\\<e>': 'ğ–¾', '\\<f>': 'ğ–¿', '\\<g>': 'ğ—€', '\\<h>': 'ğ—', '\\<i>': 'ğ—‚', '\\<j>': 'ğ—ƒ', '\\<k>': 'ğ—„', '\\<l>': 'ğ—…', '\\<m>': 'ğ—†', '\\<n>': 'ğ—‡', '\\<o>': 'ğ—ˆ', '\\<p>': 'ğ—‰', '\\<q>': 'ğ—Š', '\\<r>': 'ğ—‹', '\\<s>': 'ğ—Œ', '\\<t>': 'ğ—', '\\<u>': 'ğ—', '\\<v>': 'ğ—', '\\<w>': 'ğ—', '\\<x>': 'ğ—‘', '\\<y>': 'ğ—’', '\\<z>': 'ğ—“', '\\<AA>': 'ğ”„', '\\<BB>': 'ğ”…', '\\<CC>': 'â„­', '\\<DD>': 'ğ”‡', '\\<EE>': 'ğ”ˆ', '\\<FF>': 'ğ”‰', '\\<GG>': 'ğ”Š', '\\<HH>': 'â„Œ', '\\<II>': 'â„‘', '\\<JJ>': 'ğ”', '\\<KK>': 'ğ”', '\\<LL>': 'ğ”', '\\<MM>': 'ğ”', '\\<NN>': 'ğ”‘', '\\<OO>': 'ğ”’', '\\<PP>': 'ğ”“', '\\<QQ>': 'ğ””', '\\<RR>': 'â„œ', '\\<SS>': 'ğ”–', '\\<TT>': 'ğ”—', '\\<UU>': 'ğ”˜', '\\<VV>': 'ğ”™', '\\<WW>': 'ğ”š', '\\<XX>': 'ğ”›', '\\<YY>': 'ğ”œ', '\\<ZZ>': 'â„¨', '\\<aa>': 'ğ”', '\\<bb>': 'ğ”Ÿ', '\\<cc>': 'ğ” ', '\\<dd>': 'ğ”¡', '\\<ee>': 'ğ”¢', '\\<ff>': 'ğ”£', '\\<gg>': 'ğ”¤', '\\<hh>': 'ğ”¥', '\\<ii>': 'ğ”¦', '\\<jj>': 'ğ”§', '\\<kk>': 'ğ”¨', '\\<ll>': 'ğ”©', '\\<mm>': 'ğ”ª', '\\<nn>': 'ğ”«', '\\<oo>': 'ğ”¬', '\\<pp>': 'ğ”­', '\\<qq>': 'ğ”®', '\\<rr>': 'ğ”¯', '\\<ss>': 'ğ”°', '\\<tt>': 'ğ”±', '\\<uu>': 'ğ”²', '\\<vv>': 'ğ”³', '\\<ww>': 'ğ”´', '\\<xx>': 'ğ”µ', '\\<yy>': 'ğ”¶', '\\<zz>': 'ğ”·', '\\<alpha>': 'Î±', '\\<beta>': 'Î²', '\\<gamma>': 'Î³', '\\<delta>': 'Î´', '\\<epsilon>': 'Îµ', '\\<zeta>': 'Î¶', '\\<eta>': 'Î·', '\\<theta>': 'Î¸', '\\<iota>': 'Î¹', '\\<kappa>': 'Îº', '\\<lambda>': 'Î»', '\\<mu>': 'Î¼', '\\<nu>': 'Î½', '\\<xi>': 'Î¾', '\\<pi>': 'Ï€', '\\<rho>': 'Ï', '\\<sigma>': 'Ïƒ', '\\<tau>': 'Ï„', '\\<upsilon>': 'Ï…', '\\<phi>': 'Ï†', '\\<chi>': 'Ï‡', '\\<psi>': 'Ïˆ', '\\<omega>': 'Ï‰', '\\<Gamma>': 'Î“', '\\<Delta>': 'Î”', '\\<Theta>': 'Î˜', '\\<Lambda>': 'Î›', '\\<Xi>': 'Î', '\\<Pi>': 'Î ', '\\<Sigma>': 'Î£', '\\<Upsilon>': 'Î¥', '\\<Phi>': 'Î¦', '\\<Psi>': 'Î¨', '\\<Omega>': 'Î©', '\\<bool>': 'ğ”¹', '\\<complex>': 'â„‚', '\\<nat>': 'â„•', '\\<rat>': 'â„š', '\\<real>': 'â„', '\\<int>': 'â„¤', '\\<leftarrow>': 'â†', '\\<longleftarrow>': 'âŸµ', '\\<rightarrow>': 'â†’', '\\<longrightarrow>': 'âŸ¶', '\\<Leftarrow>': 'â‡', '\\<Longleftarrow>': 'âŸ¸', '\\<Rightarrow>': 'â‡’', '\\<Longrightarrow>': 'âŸ¹', '\\<leftrightarrow>': 'â†”', '\\<longleftrightarrow>': 'âŸ·', '\\<Leftrightarrow>': 'â‡”', '\\<Longleftrightarrow>': 'âŸº', '\\<mapsto>': 'â†¦', '\\<longmapsto>': 'âŸ¼', '\\<midarrow>': 'â”€', '\\<Midarrow>': 'â•', '\\<hookleftarrow>': 'â†©', '\\<hookrightarrow>': 'â†ª', '\\<leftharpoondown>': 'â†½', '\\<rightharpoondown>': 'â‡', '\\<leftharpoonup>': 'â†¼', '\\<rightharpoonup>': 'â‡€', '\\<rightleftharpoons>': 'â‡Œ', '\\<leadsto>': 'â†', '\\<downharpoonleft>': 'â‡ƒ', '\\<downharpoonright>': 'â‡‚', '\\<upharpoonleft>': 'â†¿', '\\<upharpoonright>': 'â†¾', '\\<restriction>': 'â†¾', '\\<Colon>': 'âˆ·', '\\<up>': 'â†‘', '\\<Up>': 'â‡‘', '\\<down>': 'â†“', '\\<Down>': 'â‡“', '\\<updown>': 'â†•', '\\<Updown>': 'â‡•', '\\<langle>': 'âŸ¨', '\\<rangle>': 'âŸ©', '\\<lceil>': 'âŒˆ', '\\<rceil>': 'âŒ‰', '\\<lfloor>': 'âŒŠ', '\\<rfloor>': 'âŒ‹', '\\<lparr>': 'â¦‡', '\\<rparr>': 'â¦ˆ', '\\<lbrakk>': 'âŸ¦', '\\<rbrakk>': 'âŸ§', '\\<lbrace>': 'â¦ƒ', '\\<rbrace>': 'â¦„', '\\<guillemotleft>': 'Â«', '\\<guillemotright>': 'Â»', '\\<bottom>': 'âŠ¥', '\\<top>': 'âŠ¤', '\\<and>': 'âˆ§', '\\<And>': 'â‹€', '\\<or>': 'âˆ¨', '\\<Or>': 'â‹', '\\<forall>': 'âˆ€', '\\<exists>': 'âˆƒ', '\\<nexists>': 'âˆ„', '\\<not>': 'Â¬', '\\<box>': 'â–¡', '\\<diamond>': 'â—‡', '\\<turnstile>': 'âŠ¢', '\\<Turnstile>': 'âŠ¨', '\\<tturnstile>': 'âŠ©', '\\<TTurnstile>': 'âŠ«', '\\<stileturn>': 'âŠ£', '\\<surd>': 'âˆš', '\\<le>': 'â‰¤', '\\<ge>': 'â‰¥', '\\<lless>': 'â‰ª', '\\<ggreater>': 'â‰«', '\\<lesssim>': 'â‰²', '\\<greatersim>': 'â‰³', '\\<lessapprox>': 'âª…', '\\<greaterapprox>': 'âª†', '\\<in>': 'âˆˆ', '\\<notin>': 'âˆ‰', '\\<subset>': 'âŠ‚', '\\<supset>': 'âŠƒ', '\\<subseteq>': 'âŠ†', '\\<supseteq>': 'âŠ‡', '\\<sqsubset>': 'âŠ', '\\<sqsupset>': 'âŠ', '\\<sqsubseteq>': 'âŠ‘', '\\<sqsupseteq>': 'âŠ’', '\\<inter>': 'âˆ©', '\\<Inter>': 'â‹‚', '\\<union>': 'âˆª', '\\<Union>': 'â‹ƒ', '\\<squnion>': 'âŠ”', '\\<Squnion>': 'â¨†', '\\<sqinter>': 'âŠ“', '\\<Sqinter>': 'â¨…', '\\<setminus>': 'âˆ–', '\\<propto>': 'âˆ', '\\<uplus>': 'âŠ', '\\<Uplus>': 'â¨„', '\\<noteq>': 'â‰ ', '\\<sim>': 'âˆ¼', '\\<doteq>': 'â‰', '\\<simeq>': 'â‰ƒ', '\\<approx>': 'â‰ˆ', '\\<asymp>': 'â‰', '\\<cong>': 'â‰…', '\\<smile>': 'âŒ£', '\\<equiv>': 'â‰¡', '\\<frown>': 'âŒ¢', '\\<Join>': 'â‹ˆ', '\\<bowtie>': 'â¨', '\\<prec>': 'â‰º', '\\<succ>': 'â‰»', '\\<preceq>': 'â‰¼', '\\<succeq>': 'â‰½', '\\<parallel>': 'âˆ¥', '\\<bar>': 'Â¦', '\\<plusminus>': 'Â±', '\\<minusplus>': 'âˆ“', '\\<times>': 'Ã—', '\\<div>': 'Ã·', '\\<cdot>': 'â‹…', '\\<star>': 'â‹†', '\\<bullet>': 'âˆ™', '\\<circ>': 'âˆ˜', '\\<dagger>': 'â€ ', '\\<ddagger>': 'â€¡', '\\<lhd>': 'âŠ²', '\\<rhd>': 'âŠ³', '\\<unlhd>': 'âŠ´', '\\<unrhd>': 'âŠµ', '\\<triangleleft>': 'â—ƒ', '\\<triangleright>': 'â–¹', '\\<triangle>': 'â–³', '\\<triangleq>': 'â‰œ', '\\<oplus>': 'âŠ•', '\\<Oplus>': 'â¨', '\\<otimes>': 'âŠ—', '\\<Otimes>': 'â¨‚', '\\<odot>': 'âŠ™', '\\<Odot>': 'â¨€', '\\<ominus>': 'âŠ–', '\\<oslash>': 'âŠ˜', '\\<dots>': 'â€¦', '\\<cdots>': 'â‹¯', '\\<Sum>': 'âˆ‘', '\\<Prod>': 'âˆ', '\\<Coprod>': 'âˆ', '\\<infinity>': 'âˆ', '\\<integral>': 'âˆ«', '\\<ointegral>': 'âˆ®', '\\<clubsuit>': 'â™£', '\\<diamondsuit>': 'â™¢', '\\<heartsuit>': 'â™¡', '\\<spadesuit>': 'â™ ', '\\<aleph>': 'â„µ', '\\<emptyset>': 'âˆ…', '\\<nabla>': 'âˆ‡', '\\<partial>': 'âˆ‚', '\\<flat>': 'â™­', '\\<natural>': 'â™®', '\\<sharp>': 'â™¯', '\\<angle>': 'âˆ ', '\\<copyright>': 'Â©', '\\<registered>': 'Â®', '\\<hyphen>': '\xad', '\\<inverse>': 'Â¯', '\\<onequarter>': 'Â¼', '\\<onehalf>': 'Â½', '\\<threequarters>': 'Â¾', '\\<ordfeminine>': 'Âª', '\\<ordmasculine>': 'Âº', '\\<section>': 'Â§', '\\<paragraph>': 'Â¶', '\\<exclamdown>': 'Â¡', '\\<questiondown>': 'Â¿', '\\<euro>': 'â‚¬', '\\<pounds>': 'Â£', '\\<yen>': 'Â¥', '\\<cent>': 'Â¢', '\\<currency>': 'Â¤', '\\<degree>': 'Â°', '\\<amalg>': 'â¨¿', '\\<mho>': 'â„§', '\\<lozenge>': 'â—Š', '\\<wp>': 'â„˜', '\\<wrong>': 'â‰€', '\\<struct>': 'â‹„', '\\<acute>': 'Â´', '\\<index>': 'Ä±', '\\<dieresis>': 'Â¨', '\\<cedilla>': 'Â¸', '\\<hungarumlaut>': 'Ë', '\\<some>': 'Ïµ', '\\<newline>': 'â', '\\<open>': 'â€¹', '\\<close>': 'â€º', '\\<here>': 'âŒ‚', '\\<^sub>': 'â‡©', '\\<^sup>': 'â‡§', '\\<^bold>': 'â™', '\\<^bsub>': 'â‡˜', '\\<^esub>': 'â‡™', '\\<^bsup>': 'â‡—', '\\<^esup>': 'â‡–'}
    lang_map = {'isabelle': isabelle_symbols, 'latex': latex_symbols}

    def __init__(self, **options):
        Filter.__init__(self, **options)
        lang = get_choice_opt(options, 'lang', ['isabelle', 'latex'], 'isabelle')
        self.symbols = self.lang_map[lang]

    def filter(self, lexer, stream):
        for ttype, value in stream:
            if value in self.symbols:
                yield (ttype, self.symbols[value])
            else:
                yield (ttype, value)