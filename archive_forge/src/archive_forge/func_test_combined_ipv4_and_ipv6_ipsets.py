import pickle
import sys
import weakref
import pytest
from netaddr import IPAddress, IPNetwork, IPRange, IPSet, cidr_exclude
def test_combined_ipv4_and_ipv6_ipsets():
    s1 = IPSet(['192.0.2.0', '::192.0.2.0', '192.0.2.2', '::192.0.2.2'])
    s2 = IPSet(['192.0.2.2', '::192.0.2.2', '192.0.2.4', '::192.0.2.4'])
    assert s1 | s2 == IPSet(['192.0.2.0/32', '192.0.2.2/32', '192.0.2.4/32', '::192.0.2.0/128', '::192.0.2.2/128', '::192.0.2.4/128'])
    assert s2 | s1 == IPSet(['192.0.2.0/32', '192.0.2.2/32', '192.0.2.4/32', '::192.0.2.0/128', '::192.0.2.2/128', '::192.0.2.4/128'])
    assert s1 & s2 == IPSet(['192.0.2.2/32', '::192.0.2.2/128'])
    assert s1 - s2 == IPSet(['192.0.2.0/32', '::192.0.2.0/128'])
    assert s2 - s1 == IPSet(['192.0.2.4/32', '::192.0.2.4/128'])
    assert s1 ^ s2 == IPSet(['192.0.2.0/32', '192.0.2.4/32', '::192.0.2.0/128', '::192.0.2.4/128'])