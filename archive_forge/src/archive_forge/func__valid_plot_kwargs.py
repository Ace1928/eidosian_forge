import matplotlib.dates  as mdates
import matplotlib.pyplot as plt
import matplotlib.colors as mcolors
import matplotlib.axes   as mpl_axes
import matplotlib.figure as mpl_fig
import pandas as pd
import numpy  as np
import copy
import io
import os
import math
import warnings
import statistics as stat
from itertools import cycle
from mplfinance._utils import _construct_aline_collections
from mplfinance._utils import _construct_hline_collections
from mplfinance._utils import _construct_vline_collections
from mplfinance._utils import _construct_tline_collections
from mplfinance._utils import _construct_mpf_collections
from mplfinance._utils import _construct_pnf_scatter
from mplfinance._widths import _determine_width_config
from mplfinance._utils import _updown_colors
from mplfinance._utils import IntegerIndexDateTimeFormatter
from mplfinance._utils import _mscatter
from mplfinance._utils import _check_and_convert_xlim_configuration
from mplfinance import _styles
from mplfinance._arg_validators import _check_and_prepare_data, _mav_validator, _label_validator
from mplfinance._arg_validators import _get_valid_plot_types, _fill_between_validator
from mplfinance._arg_validators import _process_kwargs, _validate_vkwargs_dict
from mplfinance._arg_validators import _kwarg_not_implemented, _bypass_kwarg_validation
from mplfinance._arg_validators import _hlines_validator, _vlines_validator
from mplfinance._arg_validators import _alines_validator, _tlines_validator
from mplfinance._arg_validators import _scale_padding_validator, _yscale_validator
from mplfinance._arg_validators import _valid_panel_id, _check_for_external_axes
from mplfinance._arg_validators import _xlim_validator, _mco_validator, _is_marketcolor_object
from mplfinance._panels import _build_panels
from mplfinance._panels import _set_ticks_on_bottom_panel_only
from mplfinance._helpers import _determine_format_string
from mplfinance._helpers import _list_of_dict
from mplfinance._helpers import _num_or_seq_of_num
from mplfinance._helpers import _adjust_color_brightness
def _valid_plot_kwargs():
    """
    Construct and return the "valid kwargs table" for the mplfinance.plot() function.
    A valid kwargs table is a `dict` of `dict`s.  The keys of the outer dict are the
    valid key-words for the function.  The value for each key is a dict containing
    2 specific keys: "Default", and "Validator" with the following values:
        "Default"      - The default value for the kwarg if none is specified.
        "Validator"    - A function that takes the caller specified value for the kwarg,
                         and validates that it is the correct type, and (for kwargs with 
                         a limited set of allowed values) may also validate that the
                         kwarg value is one of the allowed values.
    """
    vkwargs = {'columns': {'Default': None, 'Description': 'Column names to be used when plotting the data.' + ' Default: ("Open", "High", "Low", "Close", "Volume")', 'Validator': lambda value: isinstance(value, (tuple, list)) and len(value) == 5 and all((isinstance(c, str) for c in value))}, 'type': {'Default': 'ohlc', 'Description': 'Plot type: ' + str(_get_valid_plot_types()), 'Validator': lambda value: value in _get_valid_plot_types()}, 'style': {'Default': None, 'Description': 'plot style; see `mpf.available_styles()`', 'Validator': _styles._valid_mpf_style}, 'volume': {'Default': False, 'Description': 'Plot volume: True, False, or set to Axes object on which to plot.', 'Validator': lambda value: isinstance(value, bool) or isinstance(value, mpl_axes.Axes)}, 'mav': {'Default': None, 'Description': 'Moving Average window size(s); (int or tuple of ints)', 'Validator': _mav_validator}, 'ema': {'Default': None, 'Description': 'Exponential Moving Average window size(s); (int or tuple of ints)', 'Validator': _mav_validator}, 'mavcolors': {'Default': None, 'Description': 'color cycle for moving averages (list or tuple of colors)' + '(overrides mpf style mavcolors).', 'Validator': lambda value: isinstance(value, (list, tuple)) and all([mcolors.is_color_like(v) for v in value])}, 'renko_params': {'Default': dict(), 'Description': 'dict of renko parameters; call `mpf.kwarg_help("renko_params")`', 'Validator': lambda value: isinstance(value, dict)}, 'pnf_params': {'Default': dict(), 'Description': 'dict of point-and-figure parameters; call `mpf.kwarg_help("pnf_params")`', 'Validator': lambda value: isinstance(value, dict)}, 'study': {'Default': None, 'Description': 'kwarg not implemented', 'Validator': lambda value: _kwarg_not_implemented(value)}, 'marketcolor_overrides': {'Default': None, 'Description': 'sequence of color objects to override market colors.' + 'sequence must be same length as ohlc(v) DataFrame. Each' + 'color object may be a color, marketcolor object, or None.', 'Validator': _mco_validator}, 'mco_faceonly': {'Default': False, 'Description': 'True/False marketcolor_overrides only apply to face of candle.', 'Validator': lambda value: isinstance(value, bool)}, 'no_xgaps': {'Default': True, 'Description': 'deprecated', 'Validator': lambda value: _warn_no_xgaps_deprecated(value)}, 'show_nontrading': {'Default': False, 'Description': 'True/False show spaces for non-trading days/periods', 'Validator': lambda value: isinstance(value, bool)}, 'figscale': {'Default': None, 'Description': 'Scale figure size up (if > 1) or down (if < 1)', 'Validator': lambda value: isinstance(value, float) or isinstance(value, int)}, 'figratio': {'Default': None, 'Description': 'Aspect ratio of the figure. Default: (8.00,5.75)', 'Validator': lambda value: isinstance(value, (tuple, list)) and len(value) == 2 and isinstance(value[0], (float, int)) and isinstance(value[1], (float, int))}, 'figsize': {'Default': None, 'Description': 'Figure size: overrides both figscale and figratio,' + ' else defaults to figratio*figscale', 'Validator': lambda value: isinstance(value, (tuple, list)) and len(value) == 2 and isinstance(value[0], (float, int)) and isinstance(value[1], (float, int))}, 'fontscale': {'Default': None, 'Description': 'Scale font sizes up (if > 1) or down (if < 1)', 'Validator': lambda value: isinstance(value, float) or isinstance(value, int)}, 'linecolor': {'Default': None, 'Description': 'Line color for `type=line`', 'Validator': lambda value: mcolors.is_color_like(value)}, 'title': {'Default': None, 'Description': 'Figure Title (see also `axtitle`)', 'Validator': lambda value: isinstance(value, (str, dict))}, 'axtitle': {'Default': None, 'Description': 'Axes Title (subplot title)', 'Validator': lambda value: isinstance(value, (str, dict))}, 'xlabel': {'Default': None, 'Description': 'label for x-axis of plot', 'Validator': lambda value: isinstance(value, str)}, 'ylabel': {'Default': 'Price', 'Description': 'label for y-axis of main plot', 'Validator': lambda value: isinstance(value, str)}, 'ylabel_lower': {'Default': None, 'Description': 'label for y-axis of volume', 'Validator': lambda value: isinstance(value, str)}, 'addplot': {'Default': None, 'Description': 'addplot object or sequence of addplot objects (from `mpf.make_addplot()`)', 'Validator': lambda value: isinstance(value, dict) or (isinstance(value, list) and all([isinstance(d, dict) for d in value]))}, 'savefig': {'Default': None, 'Description': 'file name, or BytesIO, or dict with key `fname` plus other keys allowed as ' + ' kwargs to matplotlib `Figure.savefig()`', 'Validator': lambda value: isinstance(value, dict) or isinstance(value, str) or isinstance(value, io.BytesIO) or isinstance(value, os.PathLike)}, 'block': {'Default': None, 'Description': 'True/False wait for figure to be closed before returning', 'Validator': lambda value: isinstance(value, bool)}, 'returnfig': {'Default': False, 'Description': 'return Figure and list of Axes objects created by mplfinance;' + ' user must display plot when ready, usually by calling `mpf.show()`', 'Validator': lambda value: isinstance(value, bool)}, 'return_calculated_values': {'Default': None, 'Description': 'set to a variable containing an empty dict; `mpf.plot()` will fill' + ' the dict with various mplfinance calculated values', 'Validator': lambda value: isinstance(value, dict) and len(value) == 0}, 'set_ylim': {'Default': None, 'Description': 'deprecated', 'Validator': lambda value: _warn_set_ylim_deprecated(value)}, 'ylim': {'Default': None, 'Description': 'Limits for y-axis as tuple (min,max), i.e. (bottom,top)', 'Validator': lambda value: isinstance(value, (list, tuple)) and len(value) == 2 and all([isinstance(v, (int, float)) for v in value])}, 'xlim': {'Default': None, 'Description': 'Limits for x-axis as tuple (min,max), i.e. (left,right)', 'Validator': lambda value: _xlim_validator(value)}, 'set_ylim_panelB': {'Default': None, 'Description': 'deprecated', 'Validator': lambda value: _warn_set_ylim_deprecated(value)}, 'hlines': {'Default': None, 'Description': 'Draw one or more HORIZONTAL LINES across entire plot, by' + ' specifying a price, or sequence of prices.  May also be a dict' + ' with key `hlines` specifying a price or sequence of prices, plus' + ' one or more of the following keys: `colors`, `linestyle`,' + ' `linewidths`, `alpha`.', 'Validator': lambda value: _hlines_validator(value)}, 'vlines': {'Default': None, 'Description': 'Draw one or more VERTICAL LINES across entire plot, by' + ' specifying a date[time], or sequence of date[time].  May also' + ' be a dict with key `vlines` specifying a date[time] or sequence' + ' of date[time], plus one or more of the following keys:' + ' `colors`, `linestyle`, `linewidths`, `alpha`.', 'Validator': lambda value: _vlines_validator(value)}, 'alines': {'Default': None, 'Description': 'Draw one or more ARBITRARY LINES anywhere on the plot, by' + ' specifying a sequence of two or more date/price pairs, or by' + ' specifying a sequence of sequences of two or more date/price pairs.' + ' May also be a dict with key `alines` (as date/price pairs described above),' + ' plus one or more of the following keys:' + ' `colors`, `linestyle`, `linewidths`, `alpha`.', 'Validator': lambda value: _alines_validator(value)}, 'tlines': {'Default': None, 'Description': 'Draw one or more TREND LINES by specifying one or more pairs of date[times]' + ' between which each trend line should be drawn.  May also be a dict with key' + ' `tlines` as just described, plus one or more of the following keys:' + ' `colors`, `linestyle`, `linewidths`, `alpha`, `tline_use`,`tline_method`.', 'Validator': lambda value: _tlines_validator(value)}, 'panel_ratios': {'Default': None, 'Description': 'sequence of numbers indicating relative sizes of panels; sequence len' + ' must be same as number of panels, or len 2 where first entry is for' + ' main panel, and second entry is for all other panels', 'Validator': lambda value: isinstance(value, (tuple, list)) and len(value) <= 32 and all([isinstance(v, (int, float)) for v in value])}, 'main_panel': {'Default': 0, 'Description': 'integer - which panel is the main panel for `.plot()`', 'Validator': lambda value: _valid_panel_id(value)}, 'volume_panel': {'Default': 1, 'Description': 'integer - which panel is the volume panel', 'Validator': lambda value: _valid_panel_id(value)}, 'num_panels': {'Default': None, 'Description': 'total number of panels', 'Validator': lambda value: isinstance(value, int) and value in range(1, 32 + 1)}, 'datetime_format': {'Default': None, 'Description': 'x-axis tick format as valid `strftime()` format string', 'Validator': lambda value: isinstance(value, str)}, 'xrotation': {'Default': 45, 'Description': 'Angle (degrees) for x-axis tick labels; 90=vertical', 'Validator': lambda value: isinstance(value, (int, float))}, 'axisoff': {'Default': False, 'Description': '`axisoff=True` means do NOT display any axis.', 'Validator': lambda value: isinstance(value, bool)}, 'closefig': {'Default': 'auto', 'Description': 'True|False close the Figure before returning', 'Validator': lambda value: isinstance(value, bool)}, 'fill_between': {'Default': None, 'Description': 'fill between specification as y-value, or sequence of' + ' y-values, or dict containing key "y1" plus any additional' + ' kwargs for `fill_between()`', 'Validator': _fill_between_validator}, 'tight_layout': {'Default': False, 'Description': 'True|False implement tight layout (minimal padding around Figure)' + ' (see also `scale_padding` kwarg)', 'Validator': lambda value: isinstance(value, bool)}, 'scale_padding': {'Default': 1.0, 'Description': 'Increase, > 1.0, or decrease, < 1.0, padding around figure.' + ' May also be a dict containing one or more of the following keys:' + ' "top", "bottom", "left", "right", to individual scale padding' + ' on each side of Figure.', 'Validator': lambda value: _scale_padding_validator(value)}, 'width_adjuster_version': {'Default': 'v1', 'Description': 'specify version of object width adjustment algorithm: "v0" or "v1"' + ' (See also "widths" tutorial in mplfinance examples folder).', 'Validator': lambda value: value in ('v0', 'v1')}, 'scale_width_adjustment': {'Default': None, 'Description': 'scale width of plot objects wider, > 1.0, or narrower, < 1.0' + ' may also be a dict to scale individual widths.' + ' (See also "widths" tutorial in mplfinance examples folder).', 'Validator': lambda value: isinstance(value, dict) and len(value) > 0}, 'update_width_config': {'Default': None, 'Description': 'dict - update individual items in width configuration.' + ' (See also "widths" tutorial in mplfinance examples folder).', 'Validator': lambda value: isinstance(value, dict) and len(value) > 0}, 'return_width_config': {'Default': None, 'Description': 'empty dict variable to be filled with width configuration settings.', 'Validator': lambda value: isinstance(value, dict) and len(value) == 0}, 'saxbelow': {'Default': True, 'Description': 'set the volume Axes below (behind) all other Axes objects', 'Validator': lambda value: isinstance(value, bool)}, 'ax': {'Default': None, 'Description': 'Matplotlib Axes object on which to plot', 'Validator': lambda value: isinstance(value, mpl_axes.Axes)}, 'volume_exponent': {'Default': None, 'Description': 'integer exponent on the volume axis' + ' (or set to "legacy" for old mplfinance style)', 'Validator': lambda value: isinstance(value, int) or value == 'legacy'}, 'tz_localize': {'Default': True, 'Description': 'True|False localize the times in the DatetimeIndex', 'Validator': lambda value: isinstance(value, bool)}, 'yscale': {'Default': None, 'Description': 'y-axis scale: "linear", "log", "symlog", or "logit"', 'Validator': lambda value: _yscale_validator(value)}, 'volume_yscale': {'Default': None, 'Description': 'Volume y-axis scale: "linear", "log", "symlog", or "logit"', 'Validator': lambda value: _yscale_validator(value)}, 'volume_ylim': {'Default': None, 'Description': 'Volume y-axis limits as tuple (min,max), i.e. (bottom,top)', 'Validator': lambda value: isinstance(value, (list, tuple)) and len(value) == 2 and all([isinstance(v, (int, float)) for v in value])}, 'volume_alpha': {'Default': None, 'Description': 'opacity for Volume bar: 0.0 (transparent) to 1.0 (opaque)', 'Validator': lambda value: isinstance(value, (int, float)) or all([isinstance(v, (int, float)) for v in value])}, 'warn_too_much_data': {'Default': 599, 'Description': 'Tolerance for data amount in plot. Default=599 rows.' + " Values greater than 'warn_too_much_data' will trigger a warning.", 'Validator': lambda value: isinstance(value, int)}}
    _validate_vkwargs_dict(vkwargs)
    return vkwargs